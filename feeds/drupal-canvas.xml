<?xml version="1.0" encoding="utf-8"?>
<rss version="2.0">
  <channel>
    <title>Drupal Canvas</title>
    <description>Stay informed about developments in Drupal Canvas.</description>
    <link>https://www.drupal.org/project/drupal-canvas</link>
    <item>
      <title>#3568602: Handle upgrading and rendering not yet upgraded component instances of components with new(ly) required props that include an example value</title>
      <link>https://github.com/dbuytaert/drupal-digests/blob/main/issues/drupal-canvas/3568602.md</link>
      <guid isPermaLink="false">drupal-canvas-3568602</guid>
      <pubDate>Wed, 18 Feb 2026 22:40:54 +0000</pubDate>
      <description>&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;Project:&lt;/strong&gt; Drupal Canvas&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;Type:&lt;/strong&gt; Normal feature request&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;Version:&lt;/strong&gt; 1.x-dev&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;Status:&lt;/strong&gt; Fixed&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;Diff:&lt;/strong&gt; &lt;a href="https://git.drupalcode.org/project/canvas/-/commit/292c45ed8b6b4cd5a43080f94d2c8e34e294c02a"&gt;292c45e&lt;/a&gt; · +97/-46 prod · +274/-53 test · 16 files&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;Discussion:&lt;/strong&gt; &lt;a href="https://www.drupal.org/node/3568602"&gt;#3568602&lt;/a&gt; · 5 contributors · 23 comments&lt;/li&gt;
&lt;/ul&gt;
&lt;h2&gt;Summary&lt;/h2&gt;
&lt;p&gt;When a component adds a new required prop or changes an existing prop from optional to required, Canvas now automatically populates the prop with its example value. This happens both when editing a page that contains the component (the component instance upgrades automatically) and when rendering pages that haven't been edited yet (the missing prop is added at render time). This ensures that published pages continue to work immediately after a component evolves, without requiring manual updates to every page.&lt;/p&gt;
&lt;h2&gt;Impact&lt;/h2&gt;
&lt;p&gt;No upgrade or configuration changes required.&lt;/p&gt;
&lt;h2&gt;Technical details&lt;/h2&gt;
&lt;p&gt;This change extends the automatic component instance upgrade system introduced in &lt;a href="https://www.drupal.org/node/3567413"&gt;#3567413&lt;/a&gt; to handle new required props.&lt;/p&gt;
&lt;p&gt;When &lt;code&gt;GeneratedFieldExplicitInputUxComponentInstanceUpdater::update()&lt;/code&gt; upgrades a component instance, it now detects when the active version has required props that are either new or were previously optional. For new required props, it adds the &lt;code&gt;default_value&lt;/code&gt; from &lt;code&gt;prop_field_definitions&lt;/code&gt; (which comes from the first example in the JSON schema). For props that changed from optional to required, it only adds the default if no input already exists, preserving user-provided values.&lt;/p&gt;
&lt;p&gt;At render time, &lt;code&gt;ComponentTreeItemList::getHydratedTree()&lt;/code&gt; now calls &lt;code&gt;getDefaultExplicitInput(only_required: TRUE)&lt;/code&gt; on the active version's component source to get required props with default values. It passes these to &lt;code&gt;hydrateComponent()&lt;/code&gt; via a new &lt;code&gt;$active_required_explicit_inputs&lt;/code&gt; parameter. The &lt;code&gt;GeneratedFieldExplicitInputUxComponentSourceBase::hydrateComponent()&lt;/code&gt; method merges these defaults after filtering out removed props, ensuring the live component implementation receives all required props even when rendering component instances that reference older versions.&lt;/p&gt;
&lt;p&gt;The &lt;code&gt;ComponentSourceInterface::getDefaultExplicitInput()&lt;/code&gt; method now accepts an &lt;code&gt;$only_required&lt;/code&gt; parameter to return only required inputs. The &lt;code&gt;ComponentSourceInterface::hydrateComponent()&lt;/code&gt; signature adds the &lt;code&gt;$active_required_explicit_inputs&lt;/code&gt; parameter. The docs now correctly categorize adding required props and changing props to required as safe auto-update cases rather than unsafe ones.&lt;/p&gt;
&lt;h2&gt;Timeline&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;Opened: January 20, 2026&lt;/li&gt;
&lt;li&gt;Committed: February 18, 2026 (29 days later)&lt;/li&gt;
&lt;/ul&gt;
&lt;h2&gt;Collaboration&lt;/h2&gt;
&lt;p&gt;effulgentsia opened this issue as a follow-up to establish the design for handling newly required props, building on the auto-upgrade foundation. Wim Leers connected this work to earlier discussions about component evolution from April 2024 and pushed for clarity around the baseline assumption that required props must have example values. mglaman implemented the solution with careful attention to both the upgrade path and render-time hydration, then identified that test failures revealed a separate prop validation issue that was split into &lt;a href="https://www.drupal.org/node/3574120"&gt;#3574120&lt;/a&gt;. penyaskito reviewed the render logic and suggested refactoring opportunities to keep the codebase maintainable.&lt;/p&gt;
&lt;h2&gt;Lessons learned&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;When a component schema adds a required prop with an example value, existing instances can be rendered by merging the example value as a default before evaluation. This allows components to evolve without breaking already-published content that hasn't been edited yet. &lt;em&gt;(via effulgentsia)&lt;/em&gt;&lt;/li&gt;
&lt;li&gt;When a plugin's configuration schema changes, handle two separate upgrade paths: eager upgrade when the configuration is next edited, and lazy upgrade when rendering unmodified configurations. This allows published content to continue working while deferring data migration until editing occurs. &lt;em&gt;(via effulgentsia)&lt;/em&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;hr /&gt;
&lt;p&gt;&lt;em&gt;This summary is AI-generated and may contain errors. Check the &lt;a href="https://www.drupal.org/node/3568602"&gt;original issue on Drupal.org&lt;/a&gt; for the full picture. For more digests, see &lt;a href="https://github.com/dbuytaert/drupal-digests/"&gt;Drupal Digests&lt;/a&gt;.&lt;/em&gt;&lt;/p&gt;
</description>
    </item>
    <item>
      <title>#3568906: Handle upgrading and rendering not yet upgraded component instances of components with newly removed props or slots</title>
      <link>https://github.com/dbuytaert/drupal-digests/blob/main/issues/drupal-canvas/3568906.md</link>
      <guid isPermaLink="false">drupal-canvas-3568906</guid>
      <pubDate>Tue, 17 Feb 2026 14:57:48 +0000</pubDate>
      <description>&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;Project:&lt;/strong&gt; Drupal Canvas&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;Type:&lt;/strong&gt; Normal feature request&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;Version:&lt;/strong&gt; 1.x-dev&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;Status:&lt;/strong&gt; Fixed&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;Diff:&lt;/strong&gt; &lt;a href="https://git.drupalcode.org/project/canvas/-/commit/6107979db5fb0d01ab4cfe59341c11fda4dd4a77"&gt;6107979&lt;/a&gt; · +74/-29 prod · +370/-25 test · 8 files&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;Discussion:&lt;/strong&gt; &lt;a href="https://www.drupal.org/node/3568906"&gt;#3568906&lt;/a&gt; · 5 contributors · 36 comments&lt;/li&gt;
&lt;/ul&gt;
&lt;h2&gt;Summary&lt;/h2&gt;
&lt;p&gt;Canvas now automatically upgrades component instances when props or slots are removed from a component definition. When you edit a page that uses an older version of a component, any prop values or slot contents that no longer exist in the current component definition are removed during the upgrade. This prevents data from accumulating in component instances when components evolve. If you temporarily remove and then re-add a prop or slot before editing affected pages, those pages retain their original data and continue working as before.&lt;/p&gt;
&lt;h2&gt;Impact&lt;/h2&gt;
&lt;p&gt;No upgrade or configuration changes required.&lt;/p&gt;
&lt;h2&gt;Technical details&lt;/h2&gt;
&lt;p&gt;The &lt;code&gt;GeneratedFieldExplicitInputUxComponentInstanceUpdater&lt;/code&gt; now allows automatic upgrades when props or slots are removed from a component. Previously, removing a prop or slot was considered an unsafe change that prevented auto-updates. The &lt;code&gt;canUpdate()&lt;/code&gt; method no longer blocks updates for removed props or slots. The &lt;code&gt;update()&lt;/code&gt; method now actively cleans up orphaned data by removing prop values that don't exist in the active version using &lt;code&gt;array_diff_key()&lt;/code&gt; on inputs, and filtering out child component instances from removed slots using &lt;code&gt;ComponentTreeItemList::filter()&lt;/code&gt;.&lt;/p&gt;
&lt;p&gt;The &lt;code&gt;ComponentSourceManager::updateComponentInstances()&lt;/code&gt; now returns a boolean indicating whether any modifications occurred. The &lt;code&gt;ApiLayoutController&lt;/code&gt; uses this to create an auto-save when component trees are modified during GET requests, ensuring that subsequent PATCH requests work with the cleaned-up tree rather than re-loading the published version with orphaned data.&lt;/p&gt;
&lt;p&gt;Test coverage includes scenarios where slots are progressively removed (two slots to one, then one to zero) and verifies that orphaned children are cleaned up through GET-triggered auto-updates and survive through PATCH and publish operations. The documentation in &lt;code&gt;data-model.md&lt;/code&gt; was updated to list removing props and slots as safe changes.&lt;/p&gt;
&lt;h2&gt;Timeline&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;Opened: January 22, 2026&lt;/li&gt;
&lt;li&gt;First commit: February 13, 2026 (22 days later)&lt;/li&gt;
&lt;li&gt;Last commit: February 17, 2026 (3 days later)&lt;/li&gt;
&lt;/ul&gt;
&lt;h2&gt;Collaboration&lt;/h2&gt;
&lt;p&gt;mglaman implemented the core updater logic and comprehensive test coverage including the multi-phase slot removal scenario. penyaskito provided detailed testing and steps to reproduce edge cases, and identified a related issue with region handling. effulgentsia guided the scope decisions and provided technical review. wim leers conducted thorough security review around data loss concerns, leading to refinements in the auto-save approach. lauriii weighed in on the philosophical approach, advocating for the simpler deletion pattern consistent with Drupal's existing systems like Layout Builder.&lt;/p&gt;
&lt;h2&gt;Lessons learned&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;When a framework automatically upgrades data structures in response to schema changes, deleting orphaned data immediately can cause unexpected data loss. Defer cleanup until the user explicitly saves the data, providing a grace period where the old data remains available if the schema change is reverted. &lt;em&gt;(via mglaman, penyaskito, effulgentsia)&lt;/em&gt;&lt;/li&gt;
&lt;li&gt;When rendering components with version mismatches between definitions and instances, passing extra data (unused props or slots) is safe if the component code ignores unknown inputs. This allows deferred upgrades without breaking rendering, and cleanup can happen only when data is explicitly saved. &lt;em&gt;(via mglaman, penyaskito)&lt;/em&gt;&lt;/li&gt;
&lt;li&gt;When framework data cleanup follows established patterns from analogous systems (like database column drops or content type field removals), simpler deletion semantics are preferable to complex rescue mechanisms. Consistency with user expectations from similar features reduces cognitive load even if individual cases might benefit from recovery options. &lt;em&gt;(via lauriii)&lt;/em&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;hr /&gt;
&lt;p&gt;&lt;em&gt;This summary is AI-generated and may contain errors. Check the &lt;a href="https://www.drupal.org/node/3568906"&gt;original issue on Drupal.org&lt;/a&gt; for the full picture. For more digests, see &lt;a href="https://github.com/dbuytaert/drupal-digests/"&gt;Drupal Digests&lt;/a&gt;.&lt;/em&gt;&lt;/p&gt;
</description>
    </item>
    <item>
      <title>#3550848: Linker works for `type: string, format: date-time`, but `DateTimeDefaultWidget` renders the linker twice</title>
      <link>https://github.com/dbuytaert/drupal-digests/blob/main/issues/drupal-canvas/3550848.md</link>
      <guid isPermaLink="false">drupal-canvas-3550848</guid>
      <pubDate>Tue, 17 Feb 2026 10:09:53 +0000</pubDate>
      <description>&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;Project:&lt;/strong&gt; Drupal Canvas&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;Type:&lt;/strong&gt; Major bug report&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;Version:&lt;/strong&gt; 1.x-dev&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;Status:&lt;/strong&gt; Fixed&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;Diff:&lt;/strong&gt; &lt;a href="https://git.drupalcode.org/project/canvas/-/commit/789863d0e54093c63ed9547b067df467ae6a01ed"&gt;789863d&lt;/a&gt; · +46/-5 · 5 files&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;Discussion:&lt;/strong&gt; &lt;a href="https://www.drupal.org/node/3550848"&gt;#3550848&lt;/a&gt; · 3 contributors · 11 comments&lt;/li&gt;
&lt;/ul&gt;
&lt;h2&gt;Summary&lt;/h2&gt;
&lt;p&gt;When a datetime field was linked to a component property in Canvas, the linker icon appeared twice – once for the date input and once for the time input. This happened because the datetime widget uses a fieldset with two separate input fields, and the system was attaching a linker to each input's label instead of to the fieldset's legend. The fix ensures only one linker appears at the fieldset level, making the interface cleaner and easier to understand. The change also revealed and fixed a related issue where datetime values were stored without timezone information, preventing linked datetime properties from rendering correctly.&lt;/p&gt;
&lt;h2&gt;Impact&lt;/h2&gt;
&lt;p&gt;No upgrade or configuration changes required.&lt;/p&gt;
&lt;h2&gt;Technical details&lt;/h2&gt;
&lt;p&gt;The datetime field widget (&lt;code&gt;DateTimeDefaultWidget&lt;/code&gt;) renders two input elements inside a fieldset – one for date and one for time. The linker system was designed to attach to form input labels, so it created two linkers for this single field.&lt;/p&gt;
&lt;p&gt;The fix modifies &lt;code&gt;GeneratedFieldExplicitInputUxComponentSourceBase::processElementTreeLinkerLabels()&lt;/code&gt; to detect when a form element has a &lt;code&gt;fieldset&lt;/code&gt; theme wrapper and passes the prop link data to the fieldset via a new &lt;code&gt;#prop_link_data&lt;/code&gt; property. The &lt;code&gt;canvas_stark_preprocess_fieldset()&lt;/code&gt; function then JSON-encodes this data and makes it available to the template.&lt;/p&gt;
&lt;p&gt;The &lt;code&gt;fieldset.html.twig&lt;/code&gt; template was updated to use &lt;code&gt;&amp;lt;canvas-drupal-label&amp;gt;&lt;/code&gt; in the legend instead of a plain &lt;code&gt;&amp;lt;span&amp;gt;&lt;/code&gt;, allowing it to render the linker when &lt;code&gt;prop_link_data&lt;/code&gt; is present. This approach matches the existing solution for the media library widget.&lt;/p&gt;
&lt;p&gt;The &lt;code&gt;DrupalFormElementLabel.tsx&lt;/code&gt; component was also updated to respect &lt;code&gt;titleDisplay !== 'invisible'&lt;/code&gt; before rendering linkers, preventing linkers from appearing for invisible labels.&lt;/p&gt;
&lt;p&gt;The fix surfaced a separate bug where datetime values stored without timezone information failed JSON Schema validation. A workaround was added to &lt;code&gt;Evaluator::evaluate()&lt;/code&gt; for entity field expressions, appending &lt;code&gt;Z&lt;/code&gt; to datetime strings that lack timezone information. This matches the existing workaround for field type expressions. The root cause is tracked separately.&lt;/p&gt;
&lt;h2&gt;Timeline&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;Opened: October 7, 2025&lt;/li&gt;
&lt;li&gt;Committed: February 17, 2026 (4 months later)&lt;/li&gt;
&lt;/ul&gt;
&lt;h2&gt;Collaboration&lt;/h2&gt;
&lt;p&gt;Wim Leers opened the issue and implemented the fix, resolving a merge conflict with existing fieldset template changes from the media library work. bnjmnm identified the root cause early in the issue, explaining that linkers associate with form input labels but datetime widgets use fieldset legends instead, and noting that similar special-casing was already needed for media widgets.&lt;/p&gt;
&lt;h2&gt;Lessons learned&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;When rendering UI elements for compound widgets (like date/time pickers with multiple inputs), attach interactive metadata to the container's primary label rather than to each individual input. Attaching to every input creates duplicate UI affordances that confuse users. &lt;em&gt;(via bnjmnm)&lt;/em&gt;&lt;/li&gt;
&lt;li&gt;When a bug is hidden behind another bug, applying an existing workaround to the newly exposed scenario enables pragmatic progress. Once the system works end-to-end, the root cause can be addressed separately without blocking users. &lt;em&gt;(via wim leers)&lt;/em&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;hr /&gt;
&lt;p&gt;&lt;em&gt;This summary is AI-generated and may contain errors. Check the &lt;a href="https://www.drupal.org/node/3550848"&gt;original issue on Drupal.org&lt;/a&gt; for the full picture. For more digests, see &lt;a href="https://github.com/dbuytaert/drupal-digests/"&gt;Drupal Digests&lt;/a&gt;.&lt;/em&gt;&lt;/p&gt;
</description>
    </item>
    <item>
      <title>#3573796: `json-schema-definitions://canvas.module/stream-wrapper-uri` known prop shape is incorrectly mapped to link field type, causing error</title>
      <link>https://github.com/dbuytaert/drupal-digests/blob/main/issues/drupal-canvas/3573796.md</link>
      <guid isPermaLink="false">drupal-canvas-3573796</guid>
      <pubDate>Tue, 17 Feb 2026 09:19:38 +0000</pubDate>
      <description>&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;Project:&lt;/strong&gt; Drupal Canvas&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;Type:&lt;/strong&gt; Normal bug report&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;Version:&lt;/strong&gt; 1.x-dev&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;Status:&lt;/strong&gt; Fixed&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;Diff:&lt;/strong&gt; &lt;a href="https://git.drupalcode.org/project/canvas/-/commit/5f829bed6b89bbc254c90b371455f05c0e9feac8"&gt;5f829be&lt;/a&gt; · +31/-0 prod · +72/-0 test · 6 files&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;Discussion:&lt;/strong&gt; &lt;a href="https://www.drupal.org/node/3573796"&gt;#3573796&lt;/a&gt; · 2 contributors · 16 comments&lt;/li&gt;
&lt;/ul&gt;
&lt;h2&gt;Summary&lt;/h2&gt;
&lt;p&gt;Canvas was crashing when Single Directory Components used a JSON schema definition for file URIs (like &lt;code&gt;public://documents/report.pdf&lt;/code&gt;) without specifying an image content type. The system incorrectly tried to handle these as link fields, which don't support Drupal's stream wrapper schemes. This meant components that wanted to reference files like PDFs or documents would fail with errors. The fix maps these file URI properties to the correct field type so components can safely reference non-image files stored in Drupal.&lt;/p&gt;
&lt;h2&gt;Impact&lt;/h2&gt;
&lt;p&gt;No upgrade or configuration changes required.&lt;/p&gt;
&lt;h2&gt;Technical details&lt;/h2&gt;
&lt;p&gt;The &lt;code&gt;json-schema-definitions://canvas.module/stream-wrapper-uri&lt;/code&gt; JSON schema definition specifies a URI with &lt;code&gt;x-allowed-schemes: [public]&lt;/code&gt; but no &lt;code&gt;contentMediaType&lt;/code&gt;. The &lt;code&gt;JsonSchemaStringFormat::computeStorablePropShape()&lt;/code&gt; method was falling through to the default case and mapping these to a &lt;code&gt;link&lt;/code&gt; field type with a &lt;code&gt;url&lt;/code&gt; property.&lt;/p&gt;
&lt;p&gt;When Canvas tried to evaluate example values like &lt;code&gt;public://documents/report.pdf&lt;/code&gt;, the &lt;code&gt;LinkUrl::getValue()&lt;/code&gt; method called &lt;code&gt;Url::fromUri('public://...')&lt;/code&gt;, which fails because stream wrapper URIs are not valid for &lt;code&gt;Url::fromUri()&lt;/code&gt;. Only HTTP(S) and a few other specific schemes are supported by that method.&lt;/p&gt;
&lt;p&gt;The fix adds a new match condition in &lt;code&gt;JsonSchemaStringFormat::computeStorablePropShape()&lt;/code&gt; that checks for &lt;code&gt;x-allowed-schemes&lt;/code&gt; containing &lt;code&gt;public&lt;/code&gt; and no &lt;code&gt;contentMediaType&lt;/code&gt;. When matched, it returns a &lt;code&gt;ReferenceFieldTypePropExpression&lt;/code&gt; that maps to a &lt;code&gt;file&lt;/code&gt; field type's &lt;code&gt;entity&lt;/code&gt; property, then follows the reference to the &lt;code&gt;File&lt;/code&gt; entity's &lt;code&gt;uri&lt;/code&gt; base field and its &lt;code&gt;value&lt;/code&gt; property. This mirrors the existing pattern for &lt;code&gt;stream-wrapper-image-uri&lt;/code&gt; but without the image-specific handling. The field widget is set to &lt;code&gt;file_generic&lt;/code&gt;.&lt;/p&gt;
&lt;h2&gt;Timeline&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;Opened: February 16, 2026&lt;/li&gt;
&lt;li&gt;Committed: February 17, 2026&lt;/li&gt;
&lt;/ul&gt;
&lt;h2&gt;Collaboration&lt;/h2&gt;
&lt;p&gt;Fago reported this bug while implementing support for all Canvas JSON schema types in canvas_extjs, discovering the crash through test Vue components. Wim Leers quickly added test cases and expectations, then realized he had previously added test coverage for this exact prop shape in a different issue but had only partially diagnosed the problem. Fago implemented the matching logic to handle the stream wrapper URIs correctly, and both contributors collaborated in real-time as changes appeared in their shared branch.&lt;/p&gt;
&lt;h2&gt;Lessons learned&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;When mapping generic URI formats to field types, validate that the chosen field type's API supports the URI scheme before committing to the mapping. Stream wrapper URIs (like public://) are not compatible with Drupal's Url::fromUri(), which expects standard web protocols, causing runtime crashes when link field types attempt to process them. &lt;em&gt;(via fago, wim leers)&lt;/em&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;hr /&gt;
&lt;p&gt;&lt;em&gt;This summary is AI-generated and may contain errors. Check the &lt;a href="https://www.drupal.org/node/3573796"&gt;original issue on Drupal.org&lt;/a&gt; for the full picture. For more digests, see &lt;a href="https://github.com/dbuytaert/drupal-digests/"&gt;Drupal Digests&lt;/a&gt;.&lt;/em&gt;&lt;/p&gt;
</description>
    </item>
    <item>
      <title>#3561392: Test Canvas on Drupal 11.3</title>
      <link>https://github.com/dbuytaert/drupal-digests/blob/main/issues/drupal-canvas/3561392.md</link>
      <guid isPermaLink="false">drupal-canvas-3561392</guid>
      <pubDate>Mon, 16 Feb 2026 15:16:24 +0000</pubDate>
      <description>&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;Project:&lt;/strong&gt; Drupal Canvas&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;Type:&lt;/strong&gt; Critical task&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;Version:&lt;/strong&gt; 1.x-dev&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;Status:&lt;/strong&gt; Fixed&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;Diff:&lt;/strong&gt; &lt;a href="https://git.drupalcode.org/project/canvas/-/commit/e52a1ea44d7b1c860e63a70865382d157d6a532c"&gt;e52a1ea&lt;/a&gt; · +160/-50 prod · +344/-108 test · +13/-32 infra · 102 files&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;Discussion:&lt;/strong&gt; &lt;a href="https://www.drupal.org/node/3561392"&gt;#3561392&lt;/a&gt; · 5 contributors · 42 comments&lt;/li&gt;
&lt;/ul&gt;
&lt;h2&gt;Summary&lt;/h2&gt;
&lt;p&gt;Canvas now fully supports Drupal 11.3, ensuring the site builder works correctly with the latest Drupal core release. This update includes fixes for upstream changes in Drupal core, addresses new deprecations in Symfony 7.4, and adjusts test expectations to account for changes in block plugin configuration between Drupal 11.2 and 11.3. The Canvas continuous integration system now tests both 11.2 and 11.3 to maintain compatibility across versions.&lt;/p&gt;
&lt;h2&gt;Impact&lt;/h2&gt;
&lt;p&gt;No upgrade or configuration changes required.&lt;/p&gt;
&lt;h2&gt;Technical details&lt;/h2&gt;
&lt;p&gt;This issue added comprehensive Drupal 11.3 compatibility testing and fixed multiple failures caused by upstream changes. The primary driver of changes was core issue #3547808, which made the &lt;code&gt;label_display&lt;/code&gt; block configuration value non-translatable and changed its config schema from &lt;code&gt;type: label&lt;/code&gt; to &lt;code&gt;type: string&lt;/code&gt; with Choice and NotBlank constraints. This altered component version hashes throughout Canvas because &lt;code&gt;ComponentSourceBase::generateVersionHash()&lt;/code&gt; includes the schema definitions in normalized data.&lt;/p&gt;
&lt;p&gt;The team updated hundreds of test fixtures to change &lt;code&gt;label_display&lt;/code&gt; values from boolean &lt;code&gt;FALSE&lt;/code&gt; to string &lt;code&gt;'0'&lt;/code&gt; to match the new schema. Tests in &lt;code&gt;ComponentInputsEvolutionTest&lt;/code&gt; required special handling because component version hashes differ between 11.2 and 11.3 due to the config schema changes. The solution uses &lt;code&gt;match&lt;/code&gt; statements to provide version-specific expected hashes.&lt;/p&gt;
&lt;p&gt;Additional changes addressed Symfony 7.4 deprecations by updating constraint instantiation from shorthand notation to explicit array syntax (e.g., &lt;code&gt;addConstraint('StringSemantics', ['semantic' =&amp;gt; StringSemanticsConstraint::PROSE])&lt;/code&gt; instead of passing the constant directly). The &lt;code&gt;#[RunTestsInSeparateProcesses]&lt;/code&gt; attribute was added to 80+ kernel and functional tests to prevent class redeclaration errors when running the full test suite on 11.3.&lt;/p&gt;
&lt;p&gt;The &lt;code&gt;.gitlab-ci.yml&lt;/code&gt; now includes a dedicated &lt;code&gt;phpunit (11.3)&lt;/code&gt; job that runs on every merge request, ensuring Canvas doesn't regress on 11.3 support. The original &lt;code&gt;phpunit&lt;/code&gt; job continues testing 11.2 as Canvas's minimum supported version.&lt;/p&gt;
&lt;h2&gt;Timeline&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;Opened: December 4, 2025&lt;/li&gt;
&lt;li&gt;First commit: January 7, 2026 (1 month later)&lt;/li&gt;
&lt;li&gt;Last commit: February 16, 2026 (1 month later)&lt;/li&gt;
&lt;/ul&gt;
&lt;h2&gt;Collaboration&lt;/h2&gt;
&lt;p&gt;phenaproxima shepherded this complex compatibility effort over six weeks, methodically working through test failures caused by upstream changes and figuring out the root causes of obscure hash mismatches in version tracking. penyaskito provided the breakthrough for handling version-dependent test expectations by implementing core version detection with &lt;code&gt;match&lt;/code&gt; statements, then completed the painful merge when conflicts accumulated. Wim Leers conducted thorough review of all 150 changed files to ensure no test coverage was lost and created two follow-up issues to address systemic problems discovered during the work.&lt;/p&gt;
&lt;h2&gt;Lessons learned&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;When maintaining compatibility across multiple major versions of a dependency, testing against development branches introduces CI instability from upstream changes. Pin to concrete release tags to ensure reproducible builds and avoid unexpected breakage. &lt;em&gt;(via wim leers)&lt;/em&gt;&lt;/li&gt;
&lt;li&gt;When testing infrastructure code (like component versioning), avoid testing with invalid input data. Validation would prevent invalid data in production, so testing against it obscures real issues and wastes debugging time. &lt;em&gt;(via wim leers)&lt;/em&gt;&lt;/li&gt;
&lt;li&gt;When abstracting away default values from users, don't store those defaults in the database. Omit them during save and restore just-in-time to reduce storage overhead and simplify upgrades when defaults change. &lt;em&gt;(via wim leers)&lt;/em&gt;&lt;/li&gt;
&lt;li&gt;When a system generates hashes from configuration that includes schema definitions, upstream schema changes (like new constraints or type refinements) will change those hashes even if the data remains identical. Version-specific test assertions or normalization strategies are needed to handle cross-version compatibility. &lt;em&gt;(via penyaskito, wim leers)&lt;/em&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;hr /&gt;
&lt;p&gt;&lt;em&gt;This summary is AI-generated and may contain errors. Check the &lt;a href="https://www.drupal.org/node/3561392"&gt;original issue on Drupal.org&lt;/a&gt; for the full picture. For more digests, see &lt;a href="https://github.com/dbuytaert/drupal-digests/"&gt;Drupal Digests&lt;/a&gt;.&lt;/em&gt;&lt;/p&gt;
</description>
    </item>
    <item>
      <title>#3573480: Add agent skills compatibility setup in @drupal-canvas/create</title>
      <link>https://github.com/dbuytaert/drupal-digests/blob/main/issues/drupal-canvas/3573480.md</link>
      <guid isPermaLink="false">drupal-canvas-3573480</guid>
      <pubDate>Fri, 13 Feb 2026 21:05:26 +0000</pubDate>
      <description>&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;Project:&lt;/strong&gt; Drupal Canvas&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;Type:&lt;/strong&gt; Normal feature request&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;Version:&lt;/strong&gt; 1.x-dev&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;Status:&lt;/strong&gt; Fixed&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;Diff:&lt;/strong&gt; &lt;a href="https://git.drupalcode.org/project/canvas/-/commit/53baa49b879fdd7f619325e467a0fd8b340b9443"&gt;53baa49&lt;/a&gt; · +1286/-6 · 11 files&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;Discussion:&lt;/strong&gt; &lt;a href="https://www.drupal.org/node/3573480"&gt;#3573480&lt;/a&gt; · 3 contributors · 10 comments&lt;/li&gt;
&lt;/ul&gt;
&lt;h2&gt;Summary&lt;/h2&gt;
&lt;p&gt;The Drupal Canvas project scaffolder now helps developers set up compatibility for multiple coding agents when creating a new project. When a template includes agent skills, the scaffolder prompts which AI coding assistants you use and automatically creates the necessary directory links so each agent can find the skills it needs. This solves a compatibility problem where different coding agents expect skills in different directories, even though &lt;code&gt;.agents/skills&lt;/code&gt; is becoming the standard location.&lt;/p&gt;
&lt;h2&gt;Impact&lt;/h2&gt;
&lt;p&gt;No upgrade or configuration changes required.&lt;/p&gt;
&lt;h2&gt;Technical details&lt;/h2&gt;
&lt;p&gt;The &lt;code&gt;@drupal-canvas/create&lt;/code&gt; package now detects when a cloned template repository contains an &lt;code&gt;.agents/skills&lt;/code&gt; directory. If found, it calls the new &lt;code&gt;setupAgentSkills&lt;/code&gt; function which prompts users to select which coding agents they use from a searchable multiselect interface.&lt;/p&gt;
&lt;p&gt;The implementation introduces an &lt;code&gt;agents.ts&lt;/code&gt; registry defining 44 coding agents and their expected skills directory paths. Agents are categorized as &amp;quot;universal&amp;quot; (those already using &lt;code&gt;.agents/skills&lt;/code&gt; like Codex, OpenCode, and Replit) or requiring compatibility symlinks (like Claude Code using &lt;code&gt;.claude/skills&lt;/code&gt;, Cursor using &lt;code&gt;.cursor/skills&lt;/code&gt;, etc.).&lt;/p&gt;
&lt;p&gt;For non-universal agents, the setup creates relative symlinks from each agent-specific directory to the canonical &lt;code&gt;.agents/skills&lt;/code&gt; location. The &lt;code&gt;createAgentSkillSymlinks&lt;/code&gt; function handles cross-platform symlink creation, using junctions on Windows and standard symlinks elsewhere. It tracks created, skipped, and failed symlinks and reports results to the user.&lt;/p&gt;
&lt;p&gt;The new &lt;code&gt;searchMultiselect&lt;/code&gt; prompt component provides an interactive filtered selection UI with a locked section showing universal agents that don't need configuration. The implementation uses raw terminal mode and readline for keypress handling, with features like scroll pagination, search filtering, and visual feedback.&lt;/p&gt;
&lt;h2&gt;Timeline&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;Opened: February 13, 2026&lt;/li&gt;
&lt;li&gt;Committed: February 13, 2026&lt;/li&gt;
&lt;/ul&gt;
&lt;h2&gt;Collaboration&lt;/h2&gt;
&lt;p&gt;balintbrews opened the issue and committed the implementation on the same day. lauriii made their first commit to the issue fork, contributing to the development. The solution borrows the agent selection UI pattern from Vercel's skills project, adapting it for Drupal Canvas's scaffolding flow.&lt;/p&gt;
&lt;hr /&gt;
&lt;p&gt;&lt;em&gt;This summary is AI-generated and may contain errors. Check the &lt;a href="https://www.drupal.org/node/3573480"&gt;original issue on Drupal.org&lt;/a&gt; for the full picture. For more digests, see &lt;a href="https://github.com/dbuytaert/drupal-digests/"&gt;Drupal Digests&lt;/a&gt;.&lt;/em&gt;&lt;/p&gt;
</description>
    </item>
    <item>
      <title>#3573491: Default template SSH URLs fail without GitHub SSH access; use HTTPS URLs instead</title>
      <link>https://github.com/dbuytaert/drupal-digests/blob/main/issues/drupal-canvas/3573491.md</link>
      <guid isPermaLink="false">drupal-canvas-3573491</guid>
      <pubDate>Fri, 13 Feb 2026 20:45:06 +0000</pubDate>
      <description>&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;Project:&lt;/strong&gt; Drupal Canvas&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;Type:&lt;/strong&gt; Major bug report&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;Version:&lt;/strong&gt; 1.x-dev&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;Status:&lt;/strong&gt; Fixed&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;Diff:&lt;/strong&gt; &lt;a href="https://git.drupalcode.org/project/canvas/-/commit/c15a4faf1ed2bfc746aa525d3a579016d156c0ab"&gt;c15a4fa&lt;/a&gt; · +2/-2 · 1 file&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;Discussion:&lt;/strong&gt; &lt;a href="https://www.drupal.org/node/3573491"&gt;#3573491&lt;/a&gt; · 2 contributors · 6 comments&lt;/li&gt;
&lt;/ul&gt;
&lt;h2&gt;Summary&lt;/h2&gt;
&lt;p&gt;The &lt;code&gt;canvas create&lt;/code&gt; command previously failed for users without GitHub SSH keys configured because default project templates used SSH Git URLs. This affected first-time setup and environments where SSH is not available. The default template URLs now use HTTPS instead, which works without special authentication setup. This makes the scaffolding process more accessible for new users and works in more environments out of the box.&lt;/p&gt;
&lt;h2&gt;Impact&lt;/h2&gt;
&lt;p&gt;No upgrade or configuration changes required.&lt;/p&gt;
&lt;h2&gt;Technical details&lt;/h2&gt;
&lt;p&gt;The &lt;code&gt;templates.json&lt;/code&gt; file in the &lt;code&gt;packages/create&lt;/code&gt; directory defines the default project templates available to the &lt;code&gt;canvas create&lt;/code&gt; command. Previously, the template repositories used SSH URLs in the format &lt;code&gt;git@github.com:owner/repo.git&lt;/code&gt;. This required users to have GitHub SSH keys configured before they could scaffold a new project.&lt;/p&gt;
&lt;p&gt;The fix changes the repository URLs to HTTPS format (&lt;code&gt;https://github.com/owner/repo.git&lt;/code&gt;). This applies to both default templates: &lt;code&gt;acquia/nebula&lt;/code&gt; and &lt;code&gt;balintbrews/canvas-starter&lt;/code&gt;. HTTPS URLs work without any authentication configuration for public repositories, making the tool work immediately for first-time users.&lt;/p&gt;
&lt;p&gt;This is a configuration change that affects how Git clones the template repositories during project creation. The change does not modify any code behavior or API, just the data source for the scaffolding process.&lt;/p&gt;
&lt;h2&gt;Timeline&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;Opened: February 13, 2026&lt;/li&gt;
&lt;li&gt;Committed: February 13, 2026&lt;/li&gt;
&lt;/ul&gt;
&lt;h2&gt;Collaboration&lt;/h2&gt;
&lt;p&gt;This issue was opened and resolved quickly by lauriii, addressing a barrier to entry for new Canvas users.&lt;/p&gt;
&lt;hr /&gt;
&lt;p&gt;&lt;em&gt;This summary is AI-generated and may contain errors. Check the &lt;a href="https://www.drupal.org/node/3573491"&gt;original issue on Drupal.org&lt;/a&gt; for the full picture. For more digests, see &lt;a href="https://github.com/dbuytaert/drupal-digests/"&gt;Drupal Digests&lt;/a&gt;.&lt;/em&gt;&lt;/p&gt;
</description>
    </item>
    <item>
      <title>#3566260: Can't move component out of folder</title>
      <link>https://github.com/dbuytaert/drupal-digests/blob/main/issues/drupal-canvas/3566260.md</link>
      <guid isPermaLink="false">drupal-canvas-3566260</guid>
      <pubDate>Fri, 13 Feb 2026 18:54:10 +0000</pubDate>
      <description>&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;Project:&lt;/strong&gt; Drupal Canvas&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;Type:&lt;/strong&gt; Normal bug report&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;Version:&lt;/strong&gt; 1.x-dev&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;Status:&lt;/strong&gt; Fixed&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;Diff:&lt;/strong&gt; &lt;a href="https://git.drupalcode.org/project/canvas/-/commit/6ea24544e03f521df189e8214c1b4d770ddcbea3"&gt;6ea2454&lt;/a&gt; · +206/-19 · 6 files&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;Discussion:&lt;/strong&gt; &lt;a href="https://www.drupal.org/node/3566260"&gt;#3566260&lt;/a&gt; · 5 contributors · 14 comments&lt;/li&gt;
&lt;/ul&gt;
&lt;h2&gt;Summary&lt;/h2&gt;
&lt;p&gt;Users creating custom components in Drupal Canvas can drag them into folders to organize their library. However, if a component was accidentally moved into a folder, there was no way to move it back out to the main uncategorized list. This fix adds the ability to drag components out of folders and drop them into the uncategorized area, giving users full control over component organization.&lt;/p&gt;
&lt;h2&gt;Impact&lt;/h2&gt;
&lt;p&gt;No upgrade or configuration changes required.&lt;/p&gt;
&lt;h2&gt;Technical details&lt;/h2&gt;
&lt;p&gt;The Canvas library sidebar displays components in two sections: folders and an uncategorized list of top-level items. Previously, the &lt;code&gt;LibraryItemList&lt;/code&gt; component rendered uncategorized items in a plain &lt;code&gt;List&lt;/code&gt; component without any drop target. The &lt;code&gt;DragEventsHandler&lt;/code&gt; and &lt;code&gt;useDropOnFolderHandler&lt;/code&gt; hook only recognized &lt;code&gt;destination: 'folder'&lt;/code&gt; drops, so dragging from a folder to the uncategorized area had no effect.&lt;/p&gt;
&lt;p&gt;The fix wraps the uncategorized list in a new &lt;code&gt;UncategorizedDropZone&lt;/code&gt; component. This component uses &lt;code&gt;useDroppable&lt;/code&gt; from &lt;code&gt;@dnd-kit/core&lt;/code&gt; to register an &lt;code&gt;uncategorized-{itemType}&lt;/code&gt; drop target with &lt;code&gt;destination: 'uncategorized'&lt;/code&gt;. It accepts both &lt;code&gt;library&lt;/code&gt; and &lt;code&gt;code&lt;/code&gt; drag origins but rejects folder drags. When a valid component hovers over it, the zone shows visual feedback with an &lt;code&gt;isOver&lt;/code&gt; style class.&lt;/p&gt;
&lt;p&gt;The &lt;code&gt;DragEventsHandler&lt;/code&gt; now accepts both &lt;code&gt;folder&lt;/code&gt; and &lt;code&gt;uncategorized&lt;/code&gt; as valid destinations. The &lt;code&gt;useDropOnFolderHandler&lt;/code&gt; hook was updated to handle &lt;code&gt;destination === 'uncategorized'&lt;/code&gt; by setting &lt;code&gt;newFolderId&lt;/code&gt; to &lt;code&gt;null&lt;/code&gt;. When a component is dropped, the hook removes it from its prior folder if needed and skips adding it to any new folder, effectively uncategorizing it.&lt;/p&gt;
&lt;p&gt;Playwright tests were added to verify dragging a component from a folder to the uncategorized drop zone removes it from the folder, and that re-dropping an already-uncategorized item is a no-op. The test helpers &lt;code&gt;ensureFolderExpanded&lt;/code&gt; and &lt;code&gt;dragIntoDropZone&lt;/code&gt; handle the mechanics of expanding folders and performing pixel-perfect drags with retry logic for flaky drop zone activation.&lt;/p&gt;
&lt;h2&gt;Timeline&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;Opened: January 8, 2026&lt;/li&gt;
&lt;li&gt;Committed: February 13, 2026 (1 month later)&lt;/li&gt;
&lt;/ul&gt;
&lt;h2&gt;Collaboration&lt;/h2&gt;
&lt;p&gt;lauriii implemented the fix, adding the new &lt;code&gt;UncategorizedDropZone&lt;/code&gt; component and updating the drag-and-drop handling logic throughout the Canvas UI. The Playwright tests include careful handling of drop zone targeting to avoid flakiness across browsers. jessebaker helped clarify whether this was a bug or missing feature by asking the reporter to confirm the expected behavior.&lt;/p&gt;
&lt;hr /&gt;
&lt;p&gt;&lt;em&gt;This summary is AI-generated and may contain errors. Check the &lt;a href="https://www.drupal.org/node/3566260"&gt;original issue on Drupal.org&lt;/a&gt; for the full picture. For more digests, see &lt;a href="https://github.com/dbuytaert/drupal-digests/"&gt;Drupal Digests&lt;/a&gt;.&lt;/em&gt;&lt;/p&gt;
</description>
    </item>
    <item>
      <title>#3561912: Frontend changes to allow editing props and slots for code components</title>
      <link>https://github.com/dbuytaert/drupal-digests/blob/main/issues/drupal-canvas/3561912.md</link>
      <guid isPermaLink="false">drupal-canvas-3561912</guid>
      <pubDate>Fri, 13 Feb 2026 18:37:08 +0000</pubDate>
      <description>&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;Project:&lt;/strong&gt; Drupal Canvas&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;Type:&lt;/strong&gt; Normal task&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;Version:&lt;/strong&gt; 1.x-dev&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;Status:&lt;/strong&gt; Fixed&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;Diff:&lt;/strong&gt; &lt;a href="https://git.drupalcode.org/project/canvas/-/commit/ada28b4677be9cf6e28dc85ab373f2e883194da5"&gt;ada28b4&lt;/a&gt; · +994/-146 prod · +55/-0 test · 16 files&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;Discussion:&lt;/strong&gt; &lt;a href="https://www.drupal.org/node/3561912"&gt;#3561912&lt;/a&gt; · 4 contributors · 27 comments&lt;/li&gt;
&lt;/ul&gt;
&lt;h2&gt;Summary&lt;/h2&gt;
&lt;p&gt;Canvas now allows editing props and slots on code components that are already in use. Previously, these were completely locked once a component was added to the Components library. You can now add new props and slots, delete existing ones, and modify example values. However, you cannot change the name or type of existing props, or rename existing slots. This makes it safer to evolve components over time without breaking pages that already use them.&lt;/p&gt;
&lt;h2&gt;Impact&lt;/h2&gt;
&lt;p&gt;No upgrade or configuration changes required.&lt;/p&gt;
&lt;h2&gt;Technical details&lt;/h2&gt;
&lt;p&gt;This change updates the frontend code editor UI to support editing props and slots on exposed (in-use) code components. The implementation tracks which props and slots existed when the component was first loaded using new &lt;code&gt;initialPropIds&lt;/code&gt; and &lt;code&gt;initialSlotIds&lt;/code&gt; arrays in &lt;code&gt;codeEditorSlice&lt;/code&gt;. The &lt;code&gt;initializeCodeEditor&lt;/code&gt; action now populates these arrays with IDs from the loaded component.&lt;/p&gt;
&lt;p&gt;The &lt;code&gt;Props&lt;/code&gt; and &lt;code&gt;Slots&lt;/code&gt; components use these tracked IDs to selectively disable form fields. For existing props on exposed components, the name field and type selector become disabled while the example value field remains editable. For existing slots, only the name field is disabled. Newly added props and slots have no restrictions.&lt;/p&gt;
&lt;p&gt;The UI displays informational callouts explaining that changing names and types of existing props/slots is not allowed on exposed components. All other operations (adding, deleting, reordering, and modifying examples) work regardless of component status.&lt;/p&gt;
&lt;p&gt;Comprehensive vitest tests were added to &lt;code&gt;Props.test.tsx&lt;/code&gt; and &lt;code&gt;Slots.test.tsx&lt;/code&gt; covering all prop types, slot operations, and the new disabled state behavior for exposed components. The tests verify that new props/slots remain editable while existing ones have appropriate restrictions. Several form components had &lt;code&gt;isDisabled&lt;/code&gt; made optional since they no longer need blanket disabling based on component status.&lt;/p&gt;
&lt;h2&gt;Timeline&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;Opened: December 8, 2025&lt;/li&gt;
&lt;li&gt;First commit: January 29, 2026 (1 month later)&lt;/li&gt;
&lt;li&gt;Last commit: February 13, 2026 (14 days later)&lt;/li&gt;
&lt;/ul&gt;
&lt;h2&gt;Collaboration&lt;/h2&gt;
&lt;p&gt;hooroomoo shepherded this issue through multiple iterations, coordinating with backend work tracked in the parent meta issue &lt;a href="https://www.drupal.org/project/canvas/issues/3509115"&gt;#3509115&lt;/a&gt;. They split out vitest infrastructure into a separate merge request to enable parallel development and provided thorough review feedback including UX questions about how new props should behave. jptaranto implemented the core functionality and rerolled the merge request after the vitest work merged. The approach avoided artificial frontend restrictions that would have created extra work as each backend child issue was resolved.&lt;/p&gt;
&lt;hr /&gt;
&lt;p&gt;&lt;em&gt;This summary is AI-generated and may contain errors. Check the &lt;a href="https://www.drupal.org/node/3561912"&gt;original issue on Drupal.org&lt;/a&gt; for the full picture. For more digests, see &lt;a href="https://github.com/dbuytaert/drupal-digests/"&gt;Drupal Digests&lt;/a&gt;.&lt;/em&gt;&lt;/p&gt;
</description>
    </item>
    <item>
      <title>#3572292: Implement SPA navigation improvements in Publishing UX</title>
      <link>https://github.com/dbuytaert/drupal-digests/blob/main/issues/drupal-canvas/3572292.md</link>
      <guid isPermaLink="false">drupal-canvas-3572292</guid>
      <pubDate>Fri, 13 Feb 2026 16:44:21 +0000</pubDate>
      <description>&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;Project:&lt;/strong&gt; Drupal Canvas&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;Type:&lt;/strong&gt; Normal feature request&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;Version:&lt;/strong&gt; 1.1.0&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;Status:&lt;/strong&gt; Fixed&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;Diff:&lt;/strong&gt; &lt;a href="https://git.drupalcode.org/project/canvas/-/commit/33fa1ec16e80cf6d17c9ef0ffd3d56604cbec023"&gt;33fa1ec&lt;/a&gt; · +38/-28 prod · +31/-6 test · 5 files&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;Discussion:&lt;/strong&gt; &lt;a href="https://www.drupal.org/node/3572292"&gt;#3572292&lt;/a&gt; · 3 contributors · 8 comments&lt;/li&gt;
&lt;/ul&gt;
&lt;h2&gt;Summary&lt;/h2&gt;
&lt;p&gt;Publishing UX in Drupal now feels faster and smoother. When you try to publish content but validation errors occur, clicking an error link now navigates directly to the problem component without opening a new browser tab or reloading the page. Similarly, discarding unpublished changes now updates the interface instantly instead of reloading the entire page. These improvements make the editing workflow feel more responsive and modern by taking advantage of single-page application navigation already available in the interface.&lt;/p&gt;
&lt;h2&gt;Impact&lt;/h2&gt;
&lt;p&gt;No upgrade or configuration changes required.&lt;/p&gt;
&lt;h2&gt;Technical details&lt;/h2&gt;
&lt;p&gt;The Publishing UX interface now uses React Router's &lt;code&gt;Link&lt;/code&gt; component for in-app navigation instead of standard anchor tags that trigger full page reloads. In &lt;code&gt;ReviewErrors.tsx&lt;/code&gt;, error links that previously opened in new tabs with &lt;code&gt;target=&amp;quot;_blank&amp;quot;&lt;/code&gt; now use &lt;code&gt;Link&lt;/code&gt; components with relative paths like &lt;code&gt;/editor/{entity_type}/{entity_id}&lt;/code&gt; instead of absolute URLs with &lt;code&gt;baseUrl&lt;/code&gt;. This enables seamless SPA navigation to the erroring component.&lt;/p&gt;
&lt;p&gt;The discard flow in &lt;code&gt;UnpublishedChanges.tsx&lt;/code&gt; was refactored to remove the &lt;code&gt;window.location.reload()&lt;/code&gt; call. Instead, after successfully discarding a change, the code now dispatches Redux actions to invalidate relevant API cache tags for &lt;code&gt;Layout&lt;/code&gt; and &lt;code&gt;Content&lt;/code&gt;, triggering automatic refetches of fresh data. This ensures the UI reflects the server state without a full page reload.&lt;/p&gt;
&lt;p&gt;The &lt;code&gt;pendingChangesApi.ts&lt;/code&gt; service was updated so &lt;code&gt;discardPendingChange&lt;/code&gt; now optimistically updates the pending changes cache, removes the discarded change from the Redux store, and dispatches additional state resets for conflicts and errors. The &lt;code&gt;DiscardPendingChangeArg&lt;/code&gt; type was introduced to include an optional &lt;code&gt;pointer&lt;/code&gt; field for cache management.&lt;/p&gt;
&lt;p&gt;End-to-end tests were added to verify that discarding changes and clicking error links both maintain the current URL path without page reloads, confirming true SPA behavior.&lt;/p&gt;
&lt;h2&gt;Timeline&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;Opened: February 9, 2026&lt;/li&gt;
&lt;li&gt;Committed: February 13, 2026 (4 days later)&lt;/li&gt;
&lt;/ul&gt;
&lt;h2&gt;Collaboration&lt;/h2&gt;
&lt;p&gt;lauriii made the initial commits implementing both SPA navigation improvements. jessebaker opened the issue and clearly identified the two areas where page reloads could be eliminated to improve user experience.&lt;/p&gt;
&lt;hr /&gt;
&lt;p&gt;&lt;em&gt;This summary is AI-generated and may contain errors. Check the &lt;a href="https://www.drupal.org/node/3572292"&gt;original issue on Drupal.org&lt;/a&gt; for the full picture. For more digests, see &lt;a href="https://github.com/dbuytaert/drupal-digests/"&gt;Drupal Digests&lt;/a&gt;.&lt;/em&gt;&lt;/p&gt;
</description>
    </item>
    <item>
      <title>#3572652: Document how to use @tailwindcss/typography in Code Components</title>
      <link>https://github.com/dbuytaert/drupal-digests/blob/main/issues/drupal-canvas/3572652.md</link>
      <guid isPermaLink="false">drupal-canvas-3572652</guid>
      <pubDate>Fri, 13 Feb 2026 15:01:49 +0000</pubDate>
      <description>&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;Project:&lt;/strong&gt; Drupal Canvas&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;Type:&lt;/strong&gt; Normal task&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;Version:&lt;/strong&gt; 1.x-dev&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;Status:&lt;/strong&gt; Fixed&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;Diff:&lt;/strong&gt; &lt;a href="https://git.drupalcode.org/project/canvas/-/commit/a1c3c435fbf064a971d97a4bc507920d8c30bd59"&gt;a1c3c43&lt;/a&gt; · +105/-0 · 1 file&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;Discussion:&lt;/strong&gt; &lt;a href="https://www.drupal.org/node/3572652"&gt;#3572652&lt;/a&gt; · 3 contributors · 8 comments&lt;/li&gt;
&lt;/ul&gt;
&lt;h2&gt;Summary&lt;/h2&gt;
&lt;p&gt;Canvas now includes documentation for using the &lt;code&gt;@tailwindcss/typography&lt;/code&gt; plugin with Code Components. This plugin provides pre-styled typography classes that make it easy to render rich text content from Drupal fields with beautiful, consistent formatting. Site builders can now apply professional typography to content blocks without writing custom CSS for every HTML element.&lt;/p&gt;
&lt;h2&gt;Impact&lt;/h2&gt;
&lt;p&gt;No upgrade or configuration changes required.&lt;/p&gt;
&lt;h2&gt;Technical details&lt;/h2&gt;
&lt;p&gt;The Canvas documentation now covers how to use the &lt;code&gt;@tailwindcss/typography&lt;/code&gt; plugin with the &lt;code&gt;FormattedText&lt;/code&gt; component. This plugin was made available in &lt;a href="https://www.drupal.org/project/canvas/issues/3553356"&gt;#3553356&lt;/a&gt; but lacked usage documentation.&lt;/p&gt;
&lt;p&gt;The new documentation section explains how to enable the plugin by adding &lt;code&gt;@plugin &amp;quot;@tailwindcss/typography&amp;quot;&lt;/code&gt; to Global CSS, then applying the &lt;code&gt;prose&lt;/code&gt; class to &lt;code&gt;FormattedText&lt;/code&gt; components to style rendered HTML content. It covers the plugin's key features including size modifiers (&lt;code&gt;prose-sm&lt;/code&gt; through &lt;code&gt;prose-2xl&lt;/code&gt;), dark mode support with &lt;code&gt;prose-invert&lt;/code&gt;, element-specific modifiers like &lt;code&gt;prose-headings:underline&lt;/code&gt;, the &lt;code&gt;not-prose&lt;/code&gt; escape hatch, and removing the built-in max-width constraint.&lt;/p&gt;
&lt;p&gt;The documentation was added to the Code Components packages page at &lt;code&gt;docs/user/src/content/docs/code-components/packages.mdx&lt;/code&gt; alongside other built-in package documentation.&lt;/p&gt;
&lt;h2&gt;Timeline&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;Opened: February 10, 2026&lt;/li&gt;
&lt;li&gt;Committed: February 13, 2026 (2 days later)&lt;/li&gt;
&lt;/ul&gt;
&lt;h2&gt;Collaboration&lt;/h2&gt;
&lt;p&gt;nickolaj added comprehensive documentation covering all major features of the typography plugin, including practical examples for each use case. balintbrews opened the issue and provided clear guidance on what needed to be documented. wim leers noted a regression that occurred after this was committed, which was tracked separately in &lt;a href="https://www.drupal.org/project/canvas/issues/3573473"&gt;#3573473&lt;/a&gt;.&lt;/p&gt;
&lt;hr /&gt;
&lt;p&gt;&lt;em&gt;This summary is AI-generated and may contain errors. Check the &lt;a href="https://www.drupal.org/node/3572652"&gt;original issue on Drupal.org&lt;/a&gt; for the full picture. For more digests, see &lt;a href="https://github.com/dbuytaert/drupal-digests/"&gt;Drupal Digests&lt;/a&gt;.&lt;/em&gt;&lt;/p&gt;
</description>
    </item>
    <item>
      <title>#3571599: "Template for Basic page not found" error after adding new template</title>
      <link>https://github.com/dbuytaert/drupal-digests/blob/main/issues/drupal-canvas/3571599.md</link>
      <guid isPermaLink="false">drupal-canvas-3571599</guid>
      <pubDate>Thu, 12 Feb 2026 22:15:53 +0000</pubDate>
      <description>&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;Project:&lt;/strong&gt; Drupal Canvas&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;Type:&lt;/strong&gt; Normal bug report&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;Version:&lt;/strong&gt; 1.x-dev&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;Status:&lt;/strong&gt; Fixed&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;Diff:&lt;/strong&gt; &lt;a href="https://git.drupalcode.org/project/canvas/-/commit/d1e6d28b27dae3f9e5c6a10161aa7f2da04d8ed7"&gt;d1e6d28&lt;/a&gt; · +266/-16 prod · +226/-0 test · 11 files&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;Discussion:&lt;/strong&gt; &lt;a href="https://www.drupal.org/node/3571599"&gt;#3571599&lt;/a&gt; · 4 contributors · 15 comments&lt;/li&gt;
&lt;/ul&gt;
&lt;h2&gt;Summary&lt;/h2&gt;
&lt;p&gt;When adding a new content template through the Canvas editor interface, users saw an error message &amp;quot;Template for Basic page not found&amp;quot; immediately after submission. The correct message (&amp;quot;No preview content is available&amp;quot; with a link to add content) only appeared after manually refreshing the page. This bug made the template creation workflow feel broken, even though the template was actually created successfully. The fix ensures the interface updates correctly right away without requiring a refresh.&lt;/p&gt;
&lt;h2&gt;Impact&lt;/h2&gt;
&lt;p&gt;No upgrade or configuration changes required.&lt;/p&gt;
&lt;h2&gt;Technical details&lt;/h2&gt;
&lt;p&gt;The bug occurred in the &lt;code&gt;TemplateRoot&lt;/code&gt; component's template validation logic. When a new template was added via the dialog, the component checked whether a view mode existed in the templates data and set &lt;code&gt;showNoTemplateError&lt;/code&gt; to true if missing. However, the logic only set the error state when no template was found, without explicitly clearing it when a template did exist.&lt;/p&gt;
&lt;p&gt;After adding a template through the dialog, the templates data would update to include the new view mode. But because the error state was never reset to false in the success path, the stale error remained visible until a full page refresh reconstructed the component state.&lt;/p&gt;
&lt;p&gt;The fix adds an &lt;code&gt;else&lt;/code&gt; branch to explicitly call &lt;code&gt;setShowNoTemplateError(false)&lt;/code&gt; when &lt;code&gt;viewModeData&lt;/code&gt; exists, ensuring the error state is cleared immediately when the templates data updates.&lt;/p&gt;
&lt;p&gt;The patch also improves the template editor's navigation utilities. The new &lt;code&gt;setTemplatePreviewEntityId()&lt;/code&gt; function and supporting &lt;code&gt;setPreviewEntityIdInPathname()&lt;/code&gt; utility allow changing the preview entity without reconstructing the entire route. The &lt;code&gt;ContentPreviewSelector&lt;/code&gt; component now uses this focused navigation approach instead of calling the heavier &lt;code&gt;navigateToTemplateEditor()&lt;/code&gt; function, preventing unnecessary route changes that could trigger state bugs.&lt;/p&gt;
&lt;p&gt;Additional changes include comprehensive end-to-end tests for template creation workflows, accessibility improvements to the &lt;code&gt;PropLinker&lt;/code&gt; component (converting from a span to a semantic button element with proper ARIA labels), and test identifiers added to several components to support automated testing.&lt;/p&gt;
&lt;h2&gt;Timeline&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;Opened: February 4, 2026&lt;/li&gt;
&lt;li&gt;Committed: February 12, 2026 (8 days later)&lt;/li&gt;
&lt;/ul&gt;
&lt;h2&gt;Collaboration&lt;/h2&gt;
&lt;p&gt;hooroomoo made their first contribution to Canvas with this fix, identifying the state management issue and implementing both the bug fix and comprehensive test coverage. Wim Leers provided review feedback noting that data attributes added for testing should be minimal and purposeful. tedbow opened the issue and traced it back to changes from a previous seamless navigation feature.&lt;/p&gt;
&lt;hr /&gt;
&lt;p&gt;&lt;em&gt;This summary is AI-generated and may contain errors. Check the &lt;a href="https://www.drupal.org/node/3571599"&gt;original issue on Drupal.org&lt;/a&gt; for the full picture. For more digests, see &lt;a href="https://github.com/dbuytaert/drupal-digests/"&gt;Drupal Digests&lt;/a&gt;.&lt;/em&gt;&lt;/p&gt;
</description>
    </item>
    <item>
      <title>#3572876: Update Canvas JS package licensing</title>
      <link>https://github.com/dbuytaert/drupal-digests/blob/main/issues/drupal-canvas/3572876.md</link>
      <guid isPermaLink="false">drupal-canvas-3572876</guid>
      <pubDate>Wed, 11 Feb 2026 15:59:05 +0000</pubDate>
      <description>&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;Project:&lt;/strong&gt; Drupal Canvas&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;Type:&lt;/strong&gt; Normal task&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;Version:&lt;/strong&gt; 1.x-dev&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;Status:&lt;/strong&gt; Fixed&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;Diff:&lt;/strong&gt; &lt;a href="https://git.drupalcode.org/project/canvas/-/commit/0a3daed67430b39f79420d4c5f70632b471efb3c"&gt;0a3daed&lt;/a&gt; · +78/-20 · 7 files&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;Discussion:&lt;/strong&gt; &lt;a href="https://www.drupal.org/node/3572876"&gt;#3572876&lt;/a&gt; · 2 contributors · 7 comments&lt;/li&gt;
&lt;/ul&gt;
&lt;h2&gt;Summary&lt;/h2&gt;
&lt;p&gt;Five JavaScript packages distributed on npm for building Canvas Code Components have changed their license from GPL-2.0-or-later to MIT. This reduces licensing friction for developers who use these packages in their own applications. The packages affected are &lt;code&gt;drupal-canvas&lt;/code&gt;, &lt;code&gt;@drupal-canvas/create&lt;/code&gt;, &lt;code&gt;@drupal-canvas/eslint-config&lt;/code&gt;, &lt;code&gt;@drupal-canvas/extensions&lt;/code&gt;, and &lt;code&gt;@drupal-canvas/vite-plugin&lt;/code&gt;. A new licensing guide now helps contributors choose the right license for future Canvas JavaScript packages based on how tightly coupled they are to Drupal runtime APIs.&lt;/p&gt;
&lt;h2&gt;Impact&lt;/h2&gt;
&lt;p&gt;No upgrade or configuration changes required.&lt;/p&gt;
&lt;h2&gt;Technical details&lt;/h2&gt;
&lt;p&gt;The Canvas team relicensed five npm packages from GPL-2.0-or-later to MIT. These packages provide tooling and utilities for authoring Canvas Code Components but do not directly integrate with Drupal or Canvas runtime APIs. Because they have standalone utility and no tight coupling to GPL-licensed code, MIT licensing is more appropriate.&lt;/p&gt;
&lt;p&gt;A new &lt;code&gt;docs/javascript-package-license-guide.md&lt;/code&gt; file documents criteria for choosing between GPL-2.0-or-later and MIT for future packages. The guide uses a checklist approach: packages should stay GPL when they use Drupal runtime APIs like &lt;code&gt;Drupal.behaviors&lt;/code&gt;, are distributed inside module artifacts, derive from GPL-only code, or only work within Drupal internals. Packages can use MIT when they have clear standalone boundaries, no direct Drupal coupling, permissive dependency trees, and remain useful outside Drupal.&lt;/p&gt;
&lt;p&gt;The relicensed packages include the CLI scaffold tool (&lt;code&gt;@drupal-canvas/create&lt;/code&gt;), base utilities and components (&lt;code&gt;drupal-canvas&lt;/code&gt;), ESLint configuration (&lt;code&gt;@drupal-canvas/eslint-config&lt;/code&gt;), extension APIs (&lt;code&gt;@drupal-canvas/extensions&lt;/code&gt;), and Vite plugin (&lt;code&gt;@drupal-canvas/vite-plugin&lt;/code&gt;). Each package version was bumped and republished to npm with the MIT license.&lt;/p&gt;
&lt;h2&gt;Timeline&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;Opened: February 11, 2026&lt;/li&gt;
&lt;li&gt;Committed: February 11, 2026&lt;/li&gt;
&lt;/ul&gt;
&lt;hr /&gt;
&lt;p&gt;&lt;em&gt;This summary is AI-generated and may contain errors. Check the &lt;a href="https://www.drupal.org/node/3572876"&gt;original issue on Drupal.org&lt;/a&gt; for the full picture. For more digests, see &lt;a href="https://github.com/dbuytaert/drupal-digests/"&gt;Drupal Digests&lt;/a&gt;.&lt;/em&gt;&lt;/p&gt;
</description>
    </item>
    <item>
      <title>#3572777: PHPCS: require `declare(strict_types=1);`</title>
      <link>https://github.com/dbuytaert/drupal-digests/blob/main/issues/drupal-canvas/3572777.md</link>
      <guid isPermaLink="false">drupal-canvas-3572777</guid>
      <pubDate>Wed, 11 Feb 2026 11:03:56 +0000</pubDate>
      <description>&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;Project:&lt;/strong&gt; Drupal Canvas&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;Type:&lt;/strong&gt; Normal task&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;Version:&lt;/strong&gt; 1.x-dev&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;Status:&lt;/strong&gt; Fixed&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;Diff:&lt;/strong&gt; &lt;a href="https://git.drupalcode.org/project/canvas/-/commit/50f9b9b6d5b55bb04128d80c5864536756c3266b"&gt;50f9b9b&lt;/a&gt; · +75/-16 prod · +9/-0 infra · 46 files&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;Discussion:&lt;/strong&gt; &lt;a href="https://www.drupal.org/node/3572777"&gt;#3572777&lt;/a&gt; · 2 contributors · 9 comments&lt;/li&gt;
&lt;/ul&gt;
&lt;h2&gt;Summary&lt;/h2&gt;
&lt;p&gt;PHP strict type declarations are now required in all Canvas module PHP files and automatically enforced by PHPCS. This catches type-related bugs earlier during code review by failing the automated checks when the &lt;code&gt;declare(strict_types=1);&lt;/code&gt; statement is missing or incorrectly formatted. The automated check prevents code from being merged without proper type declarations, which previously required manual reminders during merge request reviews.&lt;/p&gt;
&lt;h2&gt;Impact&lt;/h2&gt;
&lt;p&gt;No upgrade or configuration changes required.&lt;/p&gt;
&lt;h2&gt;Technical details&lt;/h2&gt;
&lt;p&gt;The Canvas project added the &lt;code&gt;SlevomatCodingStandard.TypeHints.DeclareStrictTypes&lt;/code&gt; rule to &lt;code&gt;phpcs.xml&lt;/code&gt; to require &lt;code&gt;declare(strict_types=1);&lt;/code&gt; at the top of every PHP file. The rule is configured with &lt;code&gt;spacesCountAroundEqualsSign&lt;/code&gt; set to 0 to enforce &lt;code&gt;strict_types=1&lt;/code&gt; instead of &lt;code&gt;strict_types = 1&lt;/code&gt;. The rule excludes &lt;code&gt;.api.php&lt;/code&gt; files, test fixtures in &lt;code&gt;tests/fixtures/update/*&lt;/code&gt;, and the &lt;code&gt;canvas_ai&lt;/code&gt; module which is not yet held to the same standards.&lt;/p&gt;
&lt;p&gt;The diff adds &lt;code&gt;declare(strict_types=1);&lt;/code&gt; to 47 files that were missing it and corrects the formatting in 13 files that had spaces around the equals sign (changing &lt;code&gt;declare(strict_types = 1);&lt;/code&gt; to &lt;code&gt;declare(strict_types=1);&lt;/code&gt;).&lt;/p&gt;
&lt;p&gt;Enabling strict types immediately revealed a type mismatch bug in &lt;code&gt;UnixTimestampToDateAdapter&lt;/code&gt;. The &lt;code&gt;$unix&lt;/code&gt; property was typed as &lt;code&gt;string&lt;/code&gt; but received an &lt;code&gt;int&lt;/code&gt; value. The fix changed the property type to &lt;code&gt;int&lt;/code&gt; and added an explicit cast to string when passing to &lt;code&gt;\DateTime::createFromFormat()&lt;/code&gt;, which expects a string parameter.&lt;/p&gt;
&lt;h2&gt;Timeline&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;Opened: February 11, 2026&lt;/li&gt;
&lt;li&gt;Committed: February 11, 2026&lt;/li&gt;
&lt;/ul&gt;
&lt;h2&gt;Collaboration&lt;/h2&gt;
&lt;p&gt;Wim Leers opened the issue after repeatedly providing the same feedback in merge request reviews. Automating the check immediately caught a type bug during implementation that would have caused runtime errors, demonstrating the value of enforcing strict types project-wide. This pattern of converting recurring manual review feedback into automated checks saves reviewer time and catches errors earlier.&lt;/p&gt;
&lt;hr /&gt;
&lt;p&gt;&lt;em&gt;This summary is AI-generated and may contain errors. Check the &lt;a href="https://www.drupal.org/node/3572777"&gt;original issue on Drupal.org&lt;/a&gt; for the full picture. For more digests, see &lt;a href="https://github.com/dbuytaert/drupal-digests/"&gt;Drupal Digests&lt;/a&gt;.&lt;/em&gt;&lt;/p&gt;
</description>
    </item>
    <item>
      <title>#3553356: Allow @plugins support in Global CSS</title>
      <link>https://github.com/dbuytaert/drupal-digests/blob/main/issues/drupal-canvas/3553356.md</link>
      <guid isPermaLink="false">drupal-canvas-3553356</guid>
      <pubDate>Tue, 10 Feb 2026 17:31:40 +0000</pubDate>
      <description>&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;Project:&lt;/strong&gt; Drupal Canvas&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;Type:&lt;/strong&gt; Normal feature request&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;Version:&lt;/strong&gt; 1.x-dev&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;Status:&lt;/strong&gt; Fixed&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;Diff:&lt;/strong&gt; &lt;a href="https://git.drupalcode.org/project/canvas/-/commit/c858ee8cc235922c5c327792f38475debe8dfdde"&gt;c858ee8&lt;/a&gt; · +136/-58 prod · +3/-0 test · 14 files&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;Discussion:&lt;/strong&gt; &lt;a href="https://www.drupal.org/node/3553356"&gt;#3553356&lt;/a&gt; · 7 contributors · 15 comments&lt;/li&gt;
&lt;/ul&gt;
&lt;h2&gt;Summary&lt;/h2&gt;
&lt;p&gt;Drupal Canvas now supports Tailwind CSS plugins in Global CSS, allowing design teams to use popular plugins like &lt;code&gt;@tailwindcss/typography&lt;/code&gt; for rich text styling, &lt;code&gt;tailwindcss-animate&lt;/code&gt; for animations, and others. The &lt;code&gt;@tailwindcss/typography&lt;/code&gt; plugin is bundled by default. This makes it easier to build production-grade design systems within Canvas without needing to modify the build process manually.&lt;/p&gt;
&lt;h2&gt;Impact&lt;/h2&gt;
&lt;p&gt;No upgrade or configuration changes required.&lt;/p&gt;
&lt;h2&gt;Technical details&lt;/h2&gt;
&lt;p&gt;Canvas previously compiled Tailwind CSS without support for plugins, limiting the ability to extend Tailwind with community tools. This change upgrades the &lt;code&gt;tailwindcss-in-browser&lt;/code&gt; library from version 0.5.0 to 0.6.0, which adds support for loading Tailwind CSS plugins via the native JavaScript &lt;code&gt;import()&lt;/code&gt; function.&lt;/p&gt;
&lt;p&gt;The new &lt;code&gt;GlobalImports&lt;/code&gt; service centralizes the import map for Canvas, defining which JavaScript modules are available to components. The &lt;code&gt;@tailwindcss/typography&lt;/code&gt; plugin is now bundled and added to this import map, making it immediately available in Global CSS via the &lt;code&gt;@plugin &amp;quot;@tailwindcss/typography&amp;quot;&lt;/code&gt; directive.&lt;/p&gt;
&lt;p&gt;Plugins can be referenced in two ways: by bare specifier (like &lt;code&gt;@plugin &amp;quot;@tailwindcss/typography&amp;quot;&lt;/code&gt;) if they appear in the import map, or by full URL (like &lt;code&gt;@plugin &amp;quot;https://esm.sh/tailwindcss-animate&amp;quot;&lt;/code&gt;). The URL approach works in the browser but will fail in local React codebases using Canvas CLI because Node.js does not support remote HTTP imports natively.&lt;/p&gt;
&lt;p&gt;The import map rendering was moved from &lt;code&gt;JsComponent::renderComponent()&lt;/code&gt; to &lt;code&gt;CanvasController&lt;/code&gt; to ensure plugins are available across the entire Canvas UI, not just individual components. The &lt;code&gt;GlobalImports&lt;/code&gt; service handles cache-busting query strings using the module version or asset query string service.&lt;/p&gt;
&lt;h2&gt;Timeline&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;Opened: October 20, 2025&lt;/li&gt;
&lt;li&gt;Committed: February 10, 2026 (3 months later)&lt;/li&gt;
&lt;/ul&gt;
&lt;h2&gt;Collaboration&lt;/h2&gt;
&lt;p&gt;The issue involved collaboration across seven contributors over nearly four months. wotnak drove the implementation by first creating the upstream pull request in the &lt;code&gt;tailwindcss-in-browser&lt;/code&gt; library, then implementing the Canvas integration and providing detailed documentation about both URL-based and import-map-based plugin loading approaches. balintbrews guided the scope refinement, helping narrow the initial broad proposal to a focused incremental step. mayur-sose provided comprehensive test coverage including edge cases like plugin conflicts and invalid plugin handling. This pattern of contributing upstream dependencies first, then integrating them with clear documentation about limitations, helped maintain compatibility across both browser and CLI environments.&lt;/p&gt;
&lt;h2&gt;Lessons learned&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;When integrating JavaScript runtime APIs (like native import()) across browser and Node.js environments, differences in protocol support can silently break one environment. If the browser supports HTTPS imports but Node.js doesn't, explicitly restrict the feature or provide environment-specific alternatives to maintain compatibility across all deployment contexts. &lt;em&gt;(via wotnak)&lt;/em&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;hr /&gt;
&lt;p&gt;&lt;em&gt;This summary is AI-generated and may contain errors. Check the &lt;a href="https://www.drupal.org/node/3553356"&gt;original issue on Drupal.org&lt;/a&gt; for the full picture. For more digests, see &lt;a href="https://github.com/dbuytaert/drupal-digests/"&gt;Drupal Digests&lt;/a&gt;.&lt;/em&gt;&lt;/p&gt;
</description>
    </item>
    <item>
      <title>#3566541: Code Component Editor: Add a Date and DateTime prop type</title>
      <link>https://github.com/dbuytaert/drupal-digests/blob/main/issues/drupal-canvas/3566541.md</link>
      <guid isPermaLink="false">drupal-canvas-3566541</guid>
      <pubDate>Tue, 10 Feb 2026 17:29:29 +0000</pubDate>
      <description>&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;Project:&lt;/strong&gt; Drupal Canvas&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;Type:&lt;/strong&gt; Normal feature request&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;Version:&lt;/strong&gt; 1.x-dev&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;Status:&lt;/strong&gt; Fixed&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;Diff:&lt;/strong&gt; &lt;a href="https://git.drupalcode.org/project/canvas/-/commit/17caa97e176b3d823eae4f3beddb239f07762645"&gt;17caa97&lt;/a&gt; · +1315/-361 prod · +68/-957 test · 11 files&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;Discussion:&lt;/strong&gt; &lt;a href="https://www.drupal.org/node/3566541"&gt;#3566541&lt;/a&gt; · 5 contributors · 28 comments&lt;/li&gt;
&lt;/ul&gt;
&lt;h2&gt;Summary&lt;/h2&gt;
&lt;p&gt;The Code Component Editor now includes a &amp;quot;Date and time&amp;quot; option in the Type dropdown when defining props. This allows content editors to use a calendar widget to populate date values statically or link dynamically to date fields on nodes. The underlying SDC schema already supported date and datetime formats, but the UI didn't expose them until now.&lt;/p&gt;
&lt;h2&gt;Impact&lt;/h2&gt;
&lt;p&gt;No upgrade or configuration changes required.&lt;/p&gt;
&lt;h2&gt;Technical details&lt;/h2&gt;
&lt;p&gt;The Code Component Editor UI already had the config schema to support &lt;code&gt;type: string, format: date&lt;/code&gt; and &lt;code&gt;type: string, format: date-time&lt;/code&gt; props via the &lt;code&gt;canvas.json_schema.prop.string&lt;/code&gt; schema type. This support existed since &lt;a href="https://www.drupal.org/project/experience_builder/issues/3498889"&gt;#3498889&lt;/a&gt;. However, the UI lacked the interface to create these props.&lt;/p&gt;
&lt;p&gt;The implementation adds a new derived prop type called &amp;quot;date&amp;quot; to &lt;code&gt;derivedPropTypes.ts&lt;/code&gt; that maps to both &lt;code&gt;format: date&lt;/code&gt; and &lt;code&gt;format: date-time&lt;/code&gt;. A new component &lt;code&gt;FormPropTypeDate&lt;/code&gt; provides a dropdown to choose between &amp;quot;Date only&amp;quot; and &amp;quot;Date and time&amp;quot; modes, along with the appropriate HTML5 input element (type=&amp;quot;date&amp;quot; or type=&amp;quot;datetime-local&amp;quot;).&lt;/p&gt;
&lt;p&gt;For datetime values, the component handles timezone conversion between the UTC ISO string format required by the server and the local datetime format expected by the &lt;code&gt;datetime-local&lt;/code&gt; input using new utility functions &lt;code&gt;localTimeToUtcConversion&lt;/code&gt; and &lt;code&gt;utcToLocalTimeConversion&lt;/code&gt; in &lt;code&gt;date-utils.ts&lt;/code&gt;.&lt;/p&gt;
&lt;p&gt;The &lt;code&gt;Props.tsx&lt;/code&gt; component adds a case to render &lt;code&gt;FormPropTypeDate&lt;/code&gt; when &lt;code&gt;prop.format&lt;/code&gt; is &amp;quot;date&amp;quot; or &amp;quot;date-time&amp;quot;. The serialization and deserialization logic in &lt;code&gt;code-editor-utils.test.jsx&lt;/code&gt; was extended to handle these new prop types. Comprehensive tests in &lt;code&gt;Props.test.tsx&lt;/code&gt; verify the UI behavior for both date formats, including timezone handling for datetime values.&lt;/p&gt;
&lt;h2&gt;Timeline&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;Opened: January 9, 2026&lt;/li&gt;
&lt;li&gt;Committed: February 10, 2026 (1 month later)&lt;/li&gt;
&lt;/ul&gt;
&lt;h2&gt;Collaboration&lt;/h2&gt;
&lt;p&gt;effulgentsia opened the issue identifying that SDC schemas already supported date and date-time formats but the Code Component Editor UI didn't expose them. Wim Leers confirmed the underlying schema already allowed these formats since the start of the feature. hooroomoo implemented the UI changes and created a change record at &lt;a href="https://www.drupal.org/node/3572962"&gt;#3572962&lt;/a&gt;. mayur-sose conducted thorough testing with detailed test cases, surfacing two pre-existing bugs that were filed as separate issues. jptaranto provided guidance on test infrastructure.&lt;/p&gt;
&lt;hr /&gt;
&lt;p&gt;&lt;em&gt;This summary is AI-generated and may contain errors. Check the &lt;a href="https://www.drupal.org/node/3566541"&gt;original issue on Drupal.org&lt;/a&gt; for the full picture. For more digests, see &lt;a href="https://github.com/dbuytaert/drupal-digests/"&gt;Drupal Digests&lt;/a&gt;.&lt;/em&gt;&lt;/p&gt;
</description>
    </item>
    <item>
      <title>#3572401: PHPCS: require CanvasKernelTestBase to be extended, forbid extending KernelTestBase</title>
      <link>https://github.com/dbuytaert/drupal-digests/blob/main/issues/drupal-canvas/3572401.md</link>
      <guid isPermaLink="false">drupal-canvas-3572401</guid>
      <pubDate>Tue, 10 Feb 2026 15:24:58 +0000</pubDate>
      <description>&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;Project:&lt;/strong&gt; Drupal Canvas&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;Type:&lt;/strong&gt; Major task&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;Version:&lt;/strong&gt; 1.x-dev&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;Status:&lt;/strong&gt; Fixed&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;Diff:&lt;/strong&gt; &lt;a href="https://git.drupalcode.org/project/canvas/-/commit/cfdac0ce82ed8382051fd863efa465bd076b9df9"&gt;cfdac0c&lt;/a&gt; · +136/-0 prod · +22/-10 test · +7/-0 infra · 12 files&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;Discussion:&lt;/strong&gt; &lt;a href="https://www.drupal.org/node/3572401"&gt;#3572401&lt;/a&gt; · 2 contributors · 16 comments&lt;/li&gt;
&lt;/ul&gt;
&lt;h2&gt;Summary&lt;/h2&gt;
&lt;p&gt;Canvas now automatically enforces that kernel tests extend the correct base class. A custom PHP CodeSniffer rule checks that kernel tests use &lt;code&gt;CanvasKernelTestBase&lt;/code&gt; instead of Drupal core's generic &lt;code&gt;KernelTestBase&lt;/code&gt;. This automates a code review task that previously required human reviewers to catch and explain repeatedly. The rule allows documented exceptions for tests that have specific reasons to use a different base class, such as tests that install Canvas through a recipe.&lt;/p&gt;
&lt;h2&gt;Impact&lt;/h2&gt;
&lt;p&gt;No upgrade or configuration changes required.&lt;/p&gt;
&lt;h2&gt;Technical details&lt;/h2&gt;
&lt;p&gt;The Canvas project added a custom PHPCS sniff (&lt;code&gt;Canvas\Sniffs\Tests\KernelTestBaseSniff&lt;/code&gt;) that runs during continuous integration to enforce the use of &lt;code&gt;CanvasKernelTestBase&lt;/code&gt; in all kernel tests located in &lt;code&gt;tests/src/Kernel/&lt;/code&gt; directories. This builds on &lt;a href="https://www.drupal.org/project/canvas/issues/3563216"&gt;#3563216&lt;/a&gt;, which introduced &lt;code&gt;CanvasKernelTestBase&lt;/code&gt; to encode best practices and improve developer experience.&lt;/p&gt;
&lt;p&gt;The sniff examines each test class, parses its &lt;code&gt;extends&lt;/code&gt; clause, and resolves the fully qualified class name of the base class. It reports an error if a kernel test extends &lt;code&gt;KernelTestBase&lt;/code&gt; directly instead of &lt;code&gt;CanvasKernelTestBase&lt;/code&gt;. The rule includes several exception mechanisms: a hardcoded list of known &lt;code&gt;CanvasKernelTestBase&lt;/code&gt; subclasses like &lt;code&gt;ComponentSourceTestBase&lt;/code&gt;, allowed alternative base classes from core and contrib like &lt;code&gt;ConfigEntityValidationTestBase&lt;/code&gt;, and a docblock pattern for tests that document why they cannot use &lt;code&gt;CanvasKernelTestBase&lt;/code&gt;.&lt;/p&gt;
&lt;p&gt;The implementation adds &lt;code&gt;coding_standards/Canvas/Sniffs/Tests/KernelTestBaseSniff.php&lt;/code&gt; with the sniff logic and &lt;code&gt;coding_standards/Canvas/ruleset.xml&lt;/code&gt; to register it. The main &lt;code&gt;phpcs.xml&lt;/code&gt; file includes this ruleset but excludes the &lt;code&gt;canvas_ai&lt;/code&gt; submodule and one OAuth test to allow those components to maintain their own standards.&lt;/p&gt;
&lt;p&gt;Several existing tests were updated: some to extend &lt;code&gt;CanvasKernelTestBase&lt;/code&gt; instead of &lt;code&gt;KernelTestBase&lt;/code&gt;, and others to add docblock comments explaining why they cannot use the standard base class. Tests that install Canvas via recipes cannot use &lt;code&gt;CanvasKernelTestBase&lt;/code&gt; because that base class pre-installs the Canvas module.&lt;/p&gt;
&lt;h2&gt;Timeline&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;Opened: February 9, 2026&lt;/li&gt;
&lt;li&gt;Committed: February 10, 2026&lt;/li&gt;
&lt;/ul&gt;
&lt;h2&gt;Collaboration&lt;/h2&gt;
&lt;p&gt;Wim Leers created the custom sniff using an LLM to generate the initial implementation, then iterated to improve it. Phenaproxima reviewed the code and requested clarifying documentation on &lt;code&gt;CanvasKernelTestBase&lt;/code&gt; itself to explain when tests should not extend it, which Leers incorporated nearly verbatim. Phenaproxima noted the LLM-generated code was detectable but pragmatic for a developer unfamiliar with writing PHPCS sniffs. The pair coordinated to increase velocity, with Phenaproxima suggesting future reviewers make small documentation tweaks directly rather than requesting changes.&lt;/p&gt;
&lt;h2&gt;Lessons learned&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;When introducing a base class that enforces best practices, add a PHPCS sniff to prevent regressions. Automating enforcement removes the burden of repeated human review and ensures consistency across the codebase. &lt;em&gt;(via wim leers)&lt;/em&gt;&lt;/li&gt;
&lt;li&gt;When requiring a specific base class for tests in a subsystem, document exemptions directly on the test classes themselves and in the PHPCS sniff. This makes the architectural decision visible to future developers and provides a canonical list of legitimate exceptions. &lt;em&gt;(via phenaproxima, wim leers)&lt;/em&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;hr /&gt;
&lt;p&gt;&lt;em&gt;This summary is AI-generated and may contain errors. Check the &lt;a href="https://www.drupal.org/node/3572401"&gt;original issue on Drupal.org&lt;/a&gt; for the full picture. For more digests, see &lt;a href="https://github.com/dbuytaert/drupal-digests/"&gt;Drupal Digests&lt;/a&gt;.&lt;/em&gt;&lt;/p&gt;
</description>
    </item>
    <item>
      <title>#3571997: CI: auto-retry known random Cypress E2E failures + PHPUnit's dreaded "RecursiveDirectoryIterator failed to open directory" (since Drupal 11.2)</title>
      <link>https://github.com/dbuytaert/drupal-digests/blob/main/issues/drupal-canvas/3571997.md</link>
      <guid isPermaLink="false">drupal-canvas-3571997</guid>
      <pubDate>Tue, 10 Feb 2026 02:11:40 +0000</pubDate>
      <description>&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;Project:&lt;/strong&gt; Drupal Canvas&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;Type:&lt;/strong&gt; Normal task&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;Version:&lt;/strong&gt; 1.x-dev&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;Status:&lt;/strong&gt; Fixed&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;Diff:&lt;/strong&gt; &lt;a href="https://git.drupalcode.org/project/canvas/-/commit/8ed2d0bc827d742c322f193842523f8b881ee043"&gt;8ed2d0b&lt;/a&gt; · +119/-1 prod · +21/-5 test · +81/-1 infra · 9 files&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;Discussion:&lt;/strong&gt; &lt;a href="https://www.drupal.org/node/3571997"&gt;#3571997&lt;/a&gt; · 2 contributors · 28 comments&lt;/li&gt;
&lt;/ul&gt;
&lt;h2&gt;Summary&lt;/h2&gt;
&lt;p&gt;The Canvas project added automatic retry logic to its GitLab CI pipeline to handle random test failures that waste developer time. Two main problems were addressed: a race condition in PHPUnit tests that causes directory errors (appearing since Drupal 11.2), and intermittent Cypress end-to-end test failures under high infrastructure load. The CI system now detects these specific known failures and automatically retries the job up to twice, eliminating the need for manual retries.&lt;/p&gt;
&lt;h2&gt;Impact&lt;/h2&gt;
&lt;p&gt;No upgrade or configuration changes required.&lt;/p&gt;
&lt;h2&gt;Technical details&lt;/h2&gt;
&lt;p&gt;This change adds conditional auto-retry behavior to the Canvas project's &lt;code&gt;.gitlab-ci.yml&lt;/code&gt; configuration. The PHPUnit job now duplicates the upstream &lt;code&gt;gitlab_templates&lt;/code&gt; project's &lt;code&gt;.phpunit-base&lt;/code&gt; script section to capture the exit code, then uses &lt;code&gt;grep&lt;/code&gt; to scan PHPUnit XML output files for known failure patterns like &lt;code&gt;RecursiveDirectoryIterator::__construct(...): Failed to open directory: No such file or directory&lt;/code&gt;. When detected, it exits with code 112, triggering a GitLab CI retry via the &lt;code&gt;retry: { max: 2, exit_codes: 112 }&lt;/code&gt; configuration.&lt;/p&gt;
&lt;p&gt;For Cypress E2E tests, the script pipes test output to &lt;code&gt;cypress.log&lt;/code&gt; using &lt;code&gt;tee&lt;/code&gt;, then scans for specific failing test file patterns like &lt;code&gt;global-regions-interact.cy.js&lt;/code&gt;. The same exit code 112 mechanism triggers automatic retries.&lt;/p&gt;
&lt;p&gt;The implementation also fixes a secondary issue: database-specific sorting inconsistencies in config entity queries. This required forward-porting a fix from the nine-year-old Drupal core issue &lt;a href="https://www.drupal.org/project/drupal/issues/2862699"&gt;#2862699&lt;/a&gt; by creating &lt;code&gt;ConfigEntityQuery&lt;/code&gt; and &lt;code&gt;ConfigEntityQueryFactory&lt;/code&gt; classes in &lt;code&gt;src/CoreBugFix/&lt;/code&gt; that properly handle multiple sort criteria. The &lt;code&gt;CanvasServiceProvider&lt;/code&gt; now decorates the &lt;code&gt;entity.query.config&lt;/code&gt; service with this patched version.&lt;/p&gt;
&lt;p&gt;A companion upstream feature request &lt;a href="https://www.drupal.org/project/gitlab_templates/issues/3572371"&gt;#3572371&lt;/a&gt; was created to make this pattern easier to implement without duplicating the entire script section.&lt;/p&gt;
&lt;h2&gt;Timeline&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;Opened: February 6, 2026&lt;/li&gt;
&lt;li&gt;Committed: February 10, 2026 (3 days later)&lt;/li&gt;
&lt;/ul&gt;
&lt;h2&gt;Collaboration&lt;/h2&gt;
&lt;p&gt;Wim Leers implemented this solution after months of manually retrying CI jobs. Jonathan Dunn (jonathan1055) provided valuable review and suggestions in comment #8-9 and #15, proposing the upstream enhancement path that led to the feature request. The issue demonstrates a pragmatic approach: implementing a working solution locally first (even if it requires duplication), then working with upstream to provide a cleaner pattern for the broader community.&lt;/p&gt;
&lt;h2&gt;Lessons learned&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;When random test failures occur frequently in CI due to infrastructure or upstream race conditions, auto-retry based on error pattern detection in after_script prevents wasted maintainer time manually retriggering jobs. Exit with a retry-specific code (e.g., 112) when detecting known patterns, but ensure the script itself (not after_script) returns that code since after_script failures don't propagate exit codes. &lt;em&gt;(via wim leers)&lt;/em&gt;&lt;/li&gt;
&lt;li&gt;When a directory traversal error appears across multiple stack traces in different subsystems (config sync, Twig compilation, PHPUnit internals), the root cause is typically a shared race condition at the filesystem level, not bugs in each individual component. Look for common patterns across failures rather than treating each symptom separately. &lt;em&gt;(via wim leers)&lt;/em&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;hr /&gt;
&lt;p&gt;&lt;em&gt;This summary is AI-generated and may contain errors. Check the &lt;a href="https://www.drupal.org/node/3571997"&gt;original issue on Drupal.org&lt;/a&gt; for the full picture. For more digests, see &lt;a href="https://github.com/dbuytaert/drupal-digests/"&gt;Drupal Digests&lt;/a&gt;.&lt;/em&gt;&lt;/p&gt;
</description>
    </item>
    <item>
      <title>#3563216: Add a base class for kernel tests to improve DX: `CanvasKernelTestBase`</title>
      <link>https://github.com/dbuytaert/drupal-digests/blob/main/issues/drupal-canvas/3563216.md</link>
      <guid isPermaLink="false">drupal-canvas-3563216</guid>
      <pubDate>Mon, 09 Feb 2026 23:07:30 +0000</pubDate>
      <description>&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;Project:&lt;/strong&gt; Drupal Canvas&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;Type:&lt;/strong&gt; Major task&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;Version:&lt;/strong&gt; 1.x-dev&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;Status:&lt;/strong&gt; Fixed&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;Diff:&lt;/strong&gt; &lt;a href="https://git.drupalcode.org/project/canvas/-/commit/3d50837d857f8099f1013f03047c750d51dff0f9"&gt;3d50837&lt;/a&gt; · +2/-10 prod · +337/-1049 test · 79 files&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;Discussion:&lt;/strong&gt; &lt;a href="https://www.drupal.org/node/3563216"&gt;#3563216&lt;/a&gt; · 2 contributors · 20 comments&lt;/li&gt;
&lt;/ul&gt;
&lt;h2&gt;Summary&lt;/h2&gt;
&lt;p&gt;Canvas module kernel tests were verbose and difficult to maintain because each test manually installed dependencies and configured the environment. A new &lt;code&gt;CanvasKernelTestBase&lt;/code&gt; class now provides a standardized starting point for kernel tests. Tests using this base class are shorter and easier to understand because common setup happens automatically. Over 60 existing tests were converted to use the new base class, removing nearly 1,000 lines of repetitive code while keeping the same test coverage.&lt;/p&gt;
&lt;h2&gt;Impact&lt;/h2&gt;
&lt;p&gt;No upgrade or configuration changes required.&lt;/p&gt;
&lt;h2&gt;Technical details&lt;/h2&gt;
&lt;p&gt;The new &lt;code&gt;CanvasKernelTestBase&lt;/code&gt; extends Drupal core's &lt;code&gt;KernelTestBase&lt;/code&gt; and automatically installs Canvas and all its direct and indirect dependencies (such as &lt;code&gt;filter&lt;/code&gt;, &lt;code&gt;media&lt;/code&gt;, &lt;code&gt;image&lt;/code&gt;, &lt;code&gt;link&lt;/code&gt;, and &lt;code&gt;ckeditor5&lt;/code&gt;). It also enables strict config schema validation by default, which is normally disabled for contributed modules but critical for Canvas since it relies heavily on validation. The base class does not install content entity schemas, allowing individual tests to opt in to only the entities they need for speed.&lt;/p&gt;
&lt;p&gt;The patch converted 60+ kernel tests to extend &lt;code&gt;CanvasKernelTestBase&lt;/code&gt; instead of &lt;code&gt;KernelTestBase&lt;/code&gt;, removing their &lt;code&gt;$modules&lt;/code&gt; arrays and &lt;code&gt;setUp()&lt;/code&gt; boilerplate. Tests that use &lt;code&gt;CanvasTestSetup&lt;/code&gt; (a fixture class) could not yet be converted and are marked with &lt;code&gt;@todo&lt;/code&gt; comments pointing to &lt;a href="https://www.drupal.org/project/canvas/issues/3531679"&gt;#3531679&lt;/a&gt;. The refactoring removed 992 lines of code and added 322 lines, with the new base class accounting for about 100 lines and the rest being deletions from simplified tests.&lt;/p&gt;
&lt;p&gt;The class includes documentation explaining when to use it (all Canvas kernel tests except those testing installation) and what it does not provide (entity schemas must still be installed manually). A follow-up issue &lt;a href="https://www.drupal.org/project/canvas/issues/3572401"&gt;#3572401&lt;/a&gt; will add PHPCS rules to prevent regressions.&lt;/p&gt;
&lt;h2&gt;Timeline&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;Opened: December 15, 2025&lt;/li&gt;
&lt;li&gt;Committed: February 9, 2026 (1 month later)&lt;/li&gt;
&lt;/ul&gt;
&lt;h2&gt;Collaboration&lt;/h2&gt;
&lt;p&gt;Wim Leers shepherded this issue from a proof-of-concept by phenaproxima into a comprehensive refactoring. Phenaproxima initially prototyped the base class and reviewed Leers' expansion, which converted over 60 kernel tests to use the new base. Together they iterated on the scope: deciding which modules to pre-install, whether to install entity schemas, and how much documentation to provide. Phenaproxima's approval came after constructive discussion about tradeoffs between speed and convenience for future test authors.&lt;/p&gt;
&lt;h2&gt;Lessons learned&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;When creating a base test class that installs modules, installing entity schemas may seem convenient but significantly slows test execution. Let individual tests install only the entity schemas they need, keeping the base class fast by default. &lt;em&gt;(via phenaproxima, wim leers)&lt;/em&gt;&lt;/li&gt;
&lt;li&gt;When refactoring a large test suite, avoid expanding scope to fix all related technical debt in one issue. Ship the foundation that enables incremental improvements, then address remaining conversions in follow-up issues. &lt;em&gt;(via wim leers)&lt;/em&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;hr /&gt;
&lt;p&gt;&lt;em&gt;This summary is AI-generated and may contain errors. Check the &lt;a href="https://www.drupal.org/node/3563216"&gt;original issue on Drupal.org&lt;/a&gt; for the full picture. For more digests, see &lt;a href="https://github.com/dbuytaert/drupal-digests/"&gt;Drupal Digests&lt;/a&gt;.&lt;/em&gt;&lt;/p&gt;
</description>
    </item>
    <item>
      <title>#3571232: Create canvas_dev_translation module</title>
      <link>https://github.com/dbuytaert/drupal-digests/blob/main/issues/drupal-canvas/3571232.md</link>
      <guid isPermaLink="false">drupal-canvas-3571232</guid>
      <pubDate>Mon, 09 Feb 2026 21:47:33 +0000</pubDate>
      <description>&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;Project:&lt;/strong&gt; Drupal Canvas&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;Type:&lt;/strong&gt; Normal task&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;Version:&lt;/strong&gt; 1.x-dev&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;Status:&lt;/strong&gt; Fixed&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;Diff:&lt;/strong&gt; &lt;a href="https://git.drupalcode.org/project/canvas/-/commit/e454a13d0f48a600a20c8931881a62c05080706c"&gt;e454a13&lt;/a&gt; · +62/-0 prod · +46/-0 test · 4 files&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;Discussion:&lt;/strong&gt; &lt;a href="https://www.drupal.org/node/3571232"&gt;#3571232&lt;/a&gt; · 3 contributors · 15 comments&lt;/li&gt;
&lt;/ul&gt;
&lt;h2&gt;Summary&lt;/h2&gt;
&lt;p&gt;A new development module called &lt;code&gt;canvas_dev_translation&lt;/code&gt; has been added to help test translation features in Canvas sites. When enabled, this hidden module makes Canvas configuration entities translatable without requiring direct dependencies on translation modules. This allows developers to test different translation scenarios like config-only translation, content-only translation, or both together. The module is marked as hidden and is intended for development and testing purposes only.&lt;/p&gt;
&lt;h2&gt;Impact&lt;/h2&gt;
&lt;p&gt;No upgrade or configuration changes required.&lt;/p&gt;
&lt;h2&gt;Technical details&lt;/h2&gt;
&lt;p&gt;The &lt;code&gt;canvas_dev_translation&lt;/code&gt; module is a feature flag module that enables translation testing for Canvas. It uses &lt;code&gt;hook_config_schema_info_alter()&lt;/code&gt; to mark the &lt;code&gt;component_tree&lt;/code&gt; property as translatable in Canvas configuration schemas (&lt;code&gt;canvas.page_region.*&lt;/code&gt; and &lt;code&gt;canvas.content_template.*.*.*&lt;/code&gt;) rather than defining &lt;code&gt;translatable: true&lt;/code&gt; directly in &lt;code&gt;canvas.schema.yml&lt;/code&gt;. This approach prevents side effects when the module is disabled since schema alterations are not applied when the module is off.&lt;/p&gt;
&lt;p&gt;The module itself has no dependencies on &lt;code&gt;config_translation&lt;/code&gt; or &lt;code&gt;content_translation&lt;/code&gt;, allowing developers to test modular scenarios with different combinations of translation modules enabled. The &lt;code&gt;CanvasController&lt;/code&gt; was updated to detect if &lt;code&gt;canvas_dev_translation&lt;/code&gt; is enabled and pass this information to the frontend as &lt;code&gt;devTranslationMode&lt;/code&gt;.&lt;/p&gt;
&lt;p&gt;A new test method &lt;code&gt;testComponentTreeTranslatableInConfigEntities()&lt;/code&gt; verifies that &lt;code&gt;component_tree&lt;/code&gt; is not translatable by default but becomes translatable when &lt;code&gt;canvas_dev_translation&lt;/code&gt; is enabled. The code includes a todo comment indicating these schema changes should eventually move into &lt;code&gt;canvas.schema.yml&lt;/code&gt; as permanent definitions when the feature flag module is removed.&lt;/p&gt;
&lt;h2&gt;Timeline&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;Opened: February 3, 2026&lt;/li&gt;
&lt;li&gt;First commit: February 4, 2026 (1 day later)&lt;/li&gt;
&lt;li&gt;Last commit: February 9, 2026 (5 days later)&lt;/li&gt;
&lt;/ul&gt;
&lt;hr /&gt;
&lt;p&gt;&lt;em&gt;This summary is AI-generated and may contain errors. Check the &lt;a href="https://www.drupal.org/node/3571232"&gt;original issue on Drupal.org&lt;/a&gt; for the full picture. For more digests, see &lt;a href="https://github.com/dbuytaert/drupal-digests/"&gt;Drupal Digests&lt;/a&gt;.&lt;/em&gt;&lt;/p&gt;
</description>
    </item>
  </channel>
</rss>