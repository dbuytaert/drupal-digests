# #3566541: Code Component Editor: Add a Date and DateTime prop type

- **Project:** Drupal Canvas
- **Type:** Normal feature request
- **Version:** 1.x-dev
- **Status:** Fixed
- **Diff:** [17caa97](https://git.drupalcode.org/project/canvas/-/commit/17caa97e176b3d823eae4f3beddb239f07762645) · +1315/-361 prod · +68/-957 test · 11 files
- **Discussion:** [#3566541](https://www.drupal.org/node/3566541) · 5 contributors · 28 comments

## Summary

The Code Component Editor now includes a "Date and time" option in the Type dropdown when defining props. This allows content editors to use a calendar widget to populate date values statically or link dynamically to date fields on nodes. The underlying SDC schema already supported date and datetime formats, but the UI didn't expose them until now.

## Impact

No upgrade or configuration changes required.

## Technical details

The Code Component Editor UI already had the config schema to support `type: string, format: date` and `type: string, format: date-time` props via the `canvas.json_schema.prop.string` schema type. This support existed since [#3498889](https://www.drupal.org/project/experience_builder/issues/3498889). However, the UI lacked the interface to create these props.

The implementation adds a new derived prop type called "date" to `derivedPropTypes.ts` that maps to both `format: date` and `format: date-time`. A new component `FormPropTypeDate` provides a dropdown to choose between "Date only" and "Date and time" modes, along with the appropriate HTML5 input element (type="date" or type="datetime-local").

For datetime values, the component handles timezone conversion between the UTC ISO string format required by the server and the local datetime format expected by the `datetime-local` input using new utility functions `localTimeToUtcConversion` and `utcToLocalTimeConversion` in `date-utils.ts`.

The `Props.tsx` component adds a case to render `FormPropTypeDate` when `prop.format` is "date" or "date-time". The serialization and deserialization logic in `code-editor-utils.test.jsx` was extended to handle these new prop types. Comprehensive tests in `Props.test.tsx` verify the UI behavior for both date formats, including timezone handling for datetime values.

## Timeline

- Opened: January 9, 2026
- Committed: February 10, 2026 (1 month later)

## Collaboration

effulgentsia opened the issue identifying that SDC schemas already supported date and date-time formats but the Code Component Editor UI didn't expose them. Wim Leers confirmed the underlying schema already allowed these formats since the start of the feature. hooroomoo implemented the UI changes and created a change record at [#3572962](https://www.drupal.org/node/3572962). mayur-sose conducted thorough testing with detailed test cases, surfacing two pre-existing bugs that were filed as separate issues. jptaranto provided guidance on test infrastructure.

---

*This summary is AI-generated and may contain errors. Check the [original issue on Drupal.org](https://www.drupal.org/node/3566541) for the full picture. For more digests, see [Drupal Digests](https://github.com/dbuytaert/drupal-digests/).*
