# #3566260: Can't move component out of folder

- **Project:** Drupal Canvas
- **Type:** Normal bug report
- **Version:** 1.x-dev
- **Status:** Fixed
- **Diff:** [6ea2454](https://git.drupalcode.org/project/canvas/-/commit/6ea24544e03f521df189e8214c1b4d770ddcbea3) 路 +206/-19 路 6 files
- **Discussion:** [#3566260](https://www.drupal.org/node/3566260) 路 5 contributors 路 14 comments

## Summary

Users creating custom components in Drupal Canvas can drag them into folders to organize their library. However, if a component was accidentally moved into a folder, there was no way to move it back out to the main uncategorized list. This fix adds the ability to drag components out of folders and drop them into the uncategorized area, giving users full control over component organization.

## Impact

No upgrade or configuration changes required.

## Technical details

The Canvas library sidebar displays components in two sections: folders and an uncategorized list of top-level items. Previously, the `LibraryItemList` component rendered uncategorized items in a plain `List` component without any drop target. The `DragEventsHandler` and `useDropOnFolderHandler` hook only recognized `destination: 'folder'` drops, so dragging from a folder to the uncategorized area had no effect.

The fix wraps the uncategorized list in a new `UncategorizedDropZone` component. This component uses `useDroppable` from `@dnd-kit/core` to register an `uncategorized-{itemType}` drop target with `destination: 'uncategorized'`. It accepts both `library` and `code` drag origins but rejects folder drags. When a valid component hovers over it, the zone shows visual feedback with an `isOver` style class.

The `DragEventsHandler` now accepts both `folder` and `uncategorized` as valid destinations. The `useDropOnFolderHandler` hook was updated to handle `destination === 'uncategorized'` by setting `newFolderId` to `null`. When a component is dropped, the hook removes it from its prior folder if needed and skips adding it to any new folder, effectively uncategorizing it.

Playwright tests were added to verify dragging a component from a folder to the uncategorized drop zone removes it from the folder, and that re-dropping an already-uncategorized item is a no-op. The test helpers `ensureFolderExpanded` and `dragIntoDropZone` handle the mechanics of expanding folders and performing pixel-perfect drags with retry logic for flaky drop zone activation.

## Timeline

- Opened: January 8, 2026
- Committed: February 13, 2026 (1 month later)

## Collaboration

lauriii implemented the fix, adding the new `UncategorizedDropZone` component and updating the drag-and-drop handling logic throughout the Canvas UI. The Playwright tests include careful handling of drop zone targeting to avoid flakiness across browsers. jessebaker helped clarify whether this was a bug or missing feature by asking the reporter to confirm the expected behavior.

---

*This summary is AI-generated and may contain errors. Check the [original issue on Drupal.org](https://www.drupal.org/node/3566260) for the full picture. For more digests, see [Drupal Digests](https://github.com/dbuytaert/drupal-digests/).*
