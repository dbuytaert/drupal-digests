# #3571232: Create canvas_dev_translation module

- **Project:** Drupal Canvas
- **Type:** Normal task
- **Version:** 1.x-dev
- **Status:** Fixed
- **Diff:** [e454a13](https://git.drupalcode.org/project/canvas/-/commit/e454a13d0f48a600a20c8931881a62c05080706c) · +62/-0 prod · +46/-0 test · 4 files
- **Discussion:** [#3571232](https://www.drupal.org/node/3571232) · 3 contributors · 15 comments

## Summary

A new development module called `canvas_dev_translation` has been added to help test translation features in Canvas sites. When enabled, this hidden module makes Canvas configuration entities translatable without requiring direct dependencies on translation modules. This allows developers to test different translation scenarios like config-only translation, content-only translation, or both together. The module is marked as hidden and is intended for development and testing purposes only.

## Impact

No upgrade or configuration changes required.

## Technical details

The `canvas_dev_translation` module is a feature flag module that enables translation testing for Canvas. It uses `hook_config_schema_info_alter()` to mark the `component_tree` property as translatable in Canvas configuration schemas (`canvas.page_region.*` and `canvas.content_template.*.*.*`) rather than defining `translatable: true` directly in `canvas.schema.yml`. This approach prevents side effects when the module is disabled since schema alterations are not applied when the module is off.

The module itself has no dependencies on `config_translation` or `content_translation`, allowing developers to test modular scenarios with different combinations of translation modules enabled. The `CanvasController` was updated to detect if `canvas_dev_translation` is enabled and pass this information to the frontend as `devTranslationMode`.

A new test method `testComponentTreeTranslatableInConfigEntities()` verifies that `component_tree` is not translatable by default but becomes translatable when `canvas_dev_translation` is enabled. The code includes a todo comment indicating these schema changes should eventually move into `canvas.schema.yml` as permanent definitions when the feature flag module is removed.

## Timeline

- Opened: February 3, 2026
- First commit: February 4, 2026 (1 day later)
- Last commit: February 9, 2026 (5 days later)

---

*This summary is AI-generated and may contain errors. Check the [original issue on Drupal.org](https://www.drupal.org/node/3571232) for the full picture. For more digests, see [Drupal Digests](https://github.com/dbuytaert/drupal-digests/).*
