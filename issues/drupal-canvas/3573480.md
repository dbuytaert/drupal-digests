# #3573480: Add agent skills compatibility setup in @drupal-canvas/create

- **Project:** Drupal Canvas
- **Type:** Normal feature request
- **Version:** 1.x-dev
- **Status:** Fixed
- **Diff:** [53baa49](https://git.drupalcode.org/project/canvas/-/commit/53baa49b879fdd7f619325e467a0fd8b340b9443) 路 +1286/-6 路 11 files
- **Discussion:** [#3573480](https://www.drupal.org/node/3573480) 路 3 contributors 路 10 comments

## Summary

The Drupal Canvas project scaffolder now helps developers set up compatibility for multiple coding agents when creating a new project. When a template includes agent skills, the scaffolder prompts which AI coding assistants you use and automatically creates the necessary directory links so each agent can find the skills it needs. This solves a compatibility problem where different coding agents expect skills in different directories, even though `.agents/skills` is becoming the standard location.

## Impact

No upgrade or configuration changes required.

## Technical details

The `@drupal-canvas/create` package now detects when a cloned template repository contains an `.agents/skills` directory. If found, it calls the new `setupAgentSkills` function which prompts users to select which coding agents they use from a searchable multiselect interface.

The implementation introduces an `agents.ts` registry defining 44 coding agents and their expected skills directory paths. Agents are categorized as "universal" (those already using `.agents/skills` like Codex, OpenCode, and Replit) or requiring compatibility symlinks (like Claude Code using `.claude/skills`, Cursor using `.cursor/skills`, etc.).

For non-universal agents, the setup creates relative symlinks from each agent-specific directory to the canonical `.agents/skills` location. The `createAgentSkillSymlinks` function handles cross-platform symlink creation, using junctions on Windows and standard symlinks elsewhere. It tracks created, skipped, and failed symlinks and reports results to the user.

The new `searchMultiselect` prompt component provides an interactive filtered selection UI with a locked section showing universal agents that don't need configuration. The implementation uses raw terminal mode and readline for keypress handling, with features like scroll pagination, search filtering, and visual feedback.

## Timeline

- Opened: February 13, 2026
- Committed: February 13, 2026

## Collaboration

balintbrews opened the issue and committed the implementation on the same day. lauriii made their first commit to the issue fork, contributing to the development. The solution borrows the agent selection UI pattern from Vercel's skills project, adapting it for Drupal Canvas's scaffolding flow.

---

*This summary is AI-generated and may contain errors. Check the [original issue on Drupal.org](https://www.drupal.org/node/3573480) for the full picture. For more digests, see [Drupal Digests](https://github.com/dbuytaert/drupal-digests/).*
