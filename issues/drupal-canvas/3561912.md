# #3561912: Frontend changes to allow editing props and slots for code components

- **Project:** Drupal Canvas
- **Type:** Normal task
- **Version:** 1.x-dev
- **Status:** Fixed
- **Diff:** [ada28b4](https://git.drupalcode.org/project/canvas/-/commit/ada28b4677be9cf6e28dc85ab373f2e883194da5) · +994/-146 prod · +55/-0 test · 16 files
- **Discussion:** [#3561912](https://www.drupal.org/node/3561912) · 4 contributors · 27 comments

## Summary

Canvas now allows editing props and slots on code components that are already in use. Previously, these were completely locked once a component was added to the Components library. You can now add new props and slots, delete existing ones, and modify example values. However, you cannot change the name or type of existing props, or rename existing slots. This makes it safer to evolve components over time without breaking pages that already use them.

## Impact

No upgrade or configuration changes required.

## Technical details

This change updates the frontend code editor UI to support editing props and slots on exposed (in-use) code components. The implementation tracks which props and slots existed when the component was first loaded using new `initialPropIds` and `initialSlotIds` arrays in `codeEditorSlice`. The `initializeCodeEditor` action now populates these arrays with IDs from the loaded component.

The `Props` and `Slots` components use these tracked IDs to selectively disable form fields. For existing props on exposed components, the name field and type selector become disabled while the example value field remains editable. For existing slots, only the name field is disabled. Newly added props and slots have no restrictions.

The UI displays informational callouts explaining that changing names and types of existing props/slots is not allowed on exposed components. All other operations (adding, deleting, reordering, and modifying examples) work regardless of component status.

Comprehensive vitest tests were added to `Props.test.tsx` and `Slots.test.tsx` covering all prop types, slot operations, and the new disabled state behavior for exposed components. The tests verify that new props/slots remain editable while existing ones have appropriate restrictions. Several form components had `isDisabled` made optional since they no longer need blanket disabling based on component status.

## Timeline

- Opened: December 8, 2025
- First commit: January 29, 2026 (1 month later)
- Last commit: February 13, 2026 (14 days later)

## Collaboration

hooroomoo shepherded this issue through multiple iterations, coordinating with backend work tracked in the parent meta issue [#3509115](https://www.drupal.org/project/canvas/issues/3509115). They split out vitest infrastructure into a separate merge request to enable parallel development and provided thorough review feedback including UX questions about how new props should behave. jptaranto implemented the core functionality and rerolled the merge request after the vitest work merged. The approach avoided artificial frontend restrictions that would have created extra work as each backend child issue was resolved.

---

*This summary is AI-generated and may contain errors. Check the [original issue on Drupal.org](https://www.drupal.org/node/3561912) for the full picture. For more digests, see [Drupal Digests](https://github.com/dbuytaert/drupal-digests/).*
