# #3570238: Deprecate remaining functions in taxonomy

- **Project:** Drupal Core
- **Type:** Normal task
- **Version:** 11.x-dev
- **Status:** Fixed
- **Diff:** [648ed21](https://git.drupalcode.org/project/drupal/-/commit/648ed214a99a8aaeeeb2c4ea26dddd020b707944) 路 +174/-12 路 4 files
- **Discussion:** [#3570238](https://www.drupal.org/node/3570238) 路 4 contributors 路 12 comments

## Summary

Drupal core is moving internal taxonomy code to modern object-oriented patterns. Two legacy functions that maintained the taxonomy index table are now deprecated. These functions were only used internally by Drupal core and have no known uses in contributed modules. The taxonomy index continues to work exactly as before. This is part of ongoing work to clean up older procedural code in the taxonomy module.

## Impact

No upgrade or configuration changes required.

## Technical details

The `taxonomy_build_node_index()` and `taxonomy_delete_node_index()` functions have been deprecated with no public replacement. These were the last two remaining procedural functions in the taxonomy module.

Both functions managed the `taxonomy_index` table, a denormalized cache of term/node relationships used for efficient queries. The functions were only called from within hook implementations in the taxonomy module itself (`hook_node_insert()`, `hook_node_update()`, and `hook_node_predelete()`).

The code has been moved to new protected methods `buildNodeIndex()` and `deleteNodeIndex()` inside the `TaxonomyHooks` class. The functionality remains identical. The hook implementations now call the new methods instead of the deprecated functions. This refactoring supports the broader effort tracked in [#3502014](https://www.drupal.org/project/drupal/issues/3502014) to clean up hook implementations in the Taxonomy module. It also relates to [#2339235](https://www.drupal.org/project/drupal/issues/2339235), which addresses removing taxonomy's hard dependency on the node module.

The diff also fixes a duplicate deprecation notice line that was accidentally included for the `taxonomy_term_is_page()` function.

## Timeline

- Opened: January 29, 2026
- Committed: February 18, 2026 (20 days later)

## Collaboration

Nicxvan opened the issue and identified these functions as candidates for deprecation after confirming they had no uses in contributed modules. Dcam reviewed the patch thoroughly, verifying that deprecation versions followed the guidance finalized that day, confirming all usages were removed, and checking that the change record was accurate.

---

*This summary is AI-generated and may contain errors. Check the [original issue on Drupal.org](https://www.drupal.org/node/3570238) for the full picture. For more digests, see [Drupal Digests](https://github.com/dbuytaert/drupal-digests/).*
