# #3560118: In Umami, replace Toolbar with Navigation

- **Project:** Drupal Core
- **Type:** Major task
- **Version:** 11.x-dev
- **Status:** Fixed
- **Diff:** [20e9a3a](https://git.drupalcode.org/project/drupal/-/commit/20e9a3ae07f979f0457dd371c55229324a216155) · +10/-10 prod · +48/-72 test · 14 files
- **Discussion:** [#3560118](https://www.drupal.org/node/3560118) · 6 contributors · 18 comments

## Summary

The Umami demo profile now installs the Navigation module instead of Toolbar. This update modernizes the demo site to showcase Drupal's new navigation experience, which is becoming the standard administrative interface. The demonstration warning message now appears on all pages when using Navigation, not just administrative pages, making it more visible that Umami is a demo site.

## Impact

No upgrade or configuration changes required.

## Technical details

The `demo_umami` profile's `demo_umami.info.yml` file now lists `navigation` instead of `toolbar` as an installed module. The Author and Editor role configurations replace the `access toolbar` permission with `access navigation` and update their module dependencies accordingly.

The `testDemonstrationWarningMessage()` test method was simplified by removing the separate `testNavigationDemonstrationWarningMessage()` method that manually installed Navigation. The test now expects the demonstration warning to appear on all pages (front page and node pages), not just administrative pages. This reflects a behavior change in how Navigation displays status messages compared to Toolbar.

Performance test expectations were updated to reflect Navigation's resource usage. Navigation uses slightly different JavaScript and CSS assets than Toolbar, resulting in more cache operations and slightly different query counts. The tests in `OpenTelemetryFrontPagePerformanceTest`, `OpenTelemetryNodePagePerformanceTest`, and `AssetAggregationAcrossPagesTest` now expect these new baseline metrics.

## Timeline

- Opened: November 26, 2025
- Committed: February 17, 2026 (2 months later)

## Collaboration

longwave created the initial implementation and navigated the performance test updates. catch provided guidance on keeping Toolbar references in Umami for sites that might manually install it. berdir connected this work to ongoing Layout Builder performance improvements in [#3418328](https://www.drupal.org/project/drupal/issues/3418328) and [#3060985](https://www.drupal.org/project/drupal/issues/3060985), providing context about query count changes. smustgrave tested the installation and confirmed the changes work correctly.

---

*This summary is AI-generated and may contain errors. Check the [original issue on Drupal.org](https://www.drupal.org/node/3560118) for the full picture. For more digests, see [Drupal Digests](https://github.com/dbuytaert/drupal-digests/).*
