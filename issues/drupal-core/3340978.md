# #3340978: Remove uses of “illegal” from core

- **Project:** Drupal Core
- **Type:** Normal task
- **Version:** 11.x-dev
- **Status:** Fixed
- **Diff:** [5d2be21](https://git.drupalcode.org/project/drupal/-/commit/5d2be21b9ee0f7a6bd7fceea58af1461bf09deb2) · +34/-36 prod · +58/-58 test · +2/-0 infra · 56 files
- **Discussion:** [#3340978](https://www.drupal.org/node/3340978) · 7 contributors · 20 comments

## Summary

Drupal core now uses "invalid" instead of "illegal" throughout the codebase to describe incorrect or unsupported values. This language change makes error messages clearer and removes unintended legal connotations. The word "illegal" has been flagged in the spell checker to prevent future use. This affects user-facing messages, developer documentation, code comments, and internal class properties across multiple subsystems including entity queries, field storage, user validation, and Views.

## Impact

No upgrade or configuration changes required.

## Technical details

The change replaces all instances of "illegal" with "invalid" across approximately 50 locations in Drupal core. This includes user-facing validation messages, code comments, exception messages, and internal property names.

Key changes include renaming the `UserNameConstraint::$illegalMessage` property to `UserNameConstraint::$invalidMessage` and updating `UserNameConstraintValidator` to reference the new property name. Error messages in `SqlContentEntityStorageSchema` now say "Invalid initial value definition" and "Reserved field column names" instead of "Illegal." Views validation messages for field identifiers changed from "This identifier has illegal characters" to "This identifier has invalid characters."

The change also updates test fixtures, including renaming a test directory from `project-with-illegal-dir-scaffold` to `project-with-invalid-dir-scaffold`. The word "illegal" was added to `core/.cspell.json` as a flagged word to prevent future usage. Code comments in transliteration, responsive image, and entity query subsystems were updated for consistency.

## Timeline

- Opened: February 10, 2023
- Committed: February 13, 2026 (3 years later)

## Collaboration

quietone drove this issue forward, making the initial commits and adding the spell checker flag to prevent future usage of the term. dcam provided thorough text review for grammar and accuracy across the many changed strings. dww performed detailed validation of the remaining instances and confirmed the scope was appropriate, noting that migrate fixtures and vendor files were correctly excluded. The ghost of drupal past provided historical context about documentation standards and the original entity query implementation.

---

*This summary is AI-generated and may contain errors. Check the [original issue on Drupal.org](https://www.drupal.org/node/3340978) for the full picture. For more digests, see [Drupal Digests](https://github.com/dbuytaert/drupal-digests/).*
