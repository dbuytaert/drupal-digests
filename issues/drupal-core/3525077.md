# #3525077: Remove deprecated paths from the Database API & friends

- **Project:** Drupal Core
- **Type:** Normal task
- **Version:** main
- **Status:** Fixed
- **Diff:** [db2875d](https://git.drupalcode.org/project/drupal/-/commit/db2875d5ec8578aad7e447146ac5916a8e5a88ef) · +82/-347 prod · +13/-281 test · +0/-18 infra · 33 files
- **Discussion:** [#3525077](https://www.drupal.org/node/3525077) · 4 contributors · 18 comments

## Summary

Drupal 12 introduced several API changes in the Database layer during Drupal 11, including a new `FetchAs` enum for fetch modes, variadic parameters for tag checking methods, and streamlined connection URL parsing. This change removes all deprecation handling code and deprecated classes that were added to support backwards compatibility in Drupal 11. Contrib and custom modules that already updated their code for Drupal 11 will continue to work without changes.

## Impact

No upgrade or configuration changes required.

## Technical details

This maintenance task removes deprecated code paths and backwards compatibility shims from the Database API that were introduced during Drupal 11. The removed deprecations include: integer-based PDO fetch mode support in favor of the `FetchAs` enum (from [#3488338](https://www.drupal.org/node/3488338)); the `$root` parameter from `Connection::createConnectionOptionsFromUrl()` and `Database::convertDbUrlToConnectionInfo()` (from [#3511287](https://www.drupal.org/node/3511287)); `func_get_args()` style calls in `hasAllTags()` and `hasAnyTag()` in favor of variadic parameters (from [#3501046](https://www.drupal.org/node/3501046)); deprecated properties on `StatementPrefetchIterator`; and `StatementPrefetchIterator::fetchColumn()` in favor of `fetchField()` (from [#3490312](https://www.drupal.org/node/3490312)).

The diff removes empty MySQL, PostgreSQL, and SQLite query class stubs that were deprecated in Drupal 11.0 for direct extension from core classes (from [#3256524](https://www.drupal.org/node/3256524)). It also removes various deprecated internal properties like `$data`, `$columnNames`, `$rowCount`, and `$defaultFetchStyle` from statement classes, moving remaining functionality to `PdoTrait` where needed.

All deprecation trigger warnings, deprecation test coverage, PHPStan baseline entries for deprecated code, and deprecation-ignore patterns have been removed. Assertions now enforce the correct parameter types instead of triggering deprecations.

## Timeline

- Opened: May 17, 2025
- Committed: February 18, 2026 (9 months later)

## Collaboration

mondrake opened this issue to track removal of Drupal 12 deprecations from the Database API. smustgrave reviewed the merge request and confirmed all Drupal 12 deprecations were removed and feedback addressed before longwave committed the changes.

---

*This summary is AI-generated and may contain errors. Check the [original issue on Drupal.org](https://www.drupal.org/node/3525077) for the full picture. For more digests, see [Drupal Digests](https://github.com/dbuytaert/drupal-digests/).*
