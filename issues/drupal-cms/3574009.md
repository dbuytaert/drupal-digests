# #3574009: Add a hidden Drush command to export all content

- **Project:** Drupal CMS
- **Type:** Normal feature request
- **Status:** Fixed
- **Diff:** [8a6b09b](https://git.drupalcode.org/project/drupal_cms/-/commit/8a6b09bacd4a25dca24ba392ea9a63754131c5c7) · +256/-66 prod · +20/-4 test · 12 files
- **Discussion:** [#3574009](https://www.drupal.org/node/3574009) · 1 contributor · 6 comments

## Summary

Drupal CMS now includes a hidden Drush command that makes it easy for developers to export all content from a site to a directory. This is useful for creating development snapshots, migrating content between environments, or backing up site content in a portable format. The command is hidden because it's intended for developer use rather than routine site administration. The change also extracts the content loading logic into a reusable component that both the site export and content export commands can use.

## Impact

No upgrade or configuration changes required.

## Technical details

This change adds a new `content:export:all` Drush command in the `drupal_cms_helper` module. The command is marked as hidden (not shown in normal help listings) and exports all content entities to a specified directory using Drupal's default content export system.

The implementation extracts the content loading logic from `SiteExporter::loadAllContent()` into a new `ContentLoader` class that implements `IteratorAggregate`. The `ContentLoader` iterates through all entity types, filters out internal entities and path aliases, and yields all content entities. It excludes users 0 and 1 since those always exist with the same IDs.

The new `ExportAllContentCommand` class uses the `Exporter` service to export each entity with its dependencies to the target directory. The command accepts a single required argument for the destination directory path.

Both `ContentLoader` and `ExportAllContentCommand` are marked as `@internal`, but the command itself is marked as `@api` to signal that developers can rely on it. The change also adds `@api` annotations to existing commands (`content:import`, `site:export`) to clarify their stability guarantees within Drupal CMS.

## Timeline

- Opened: February 17, 2026
- Committed: February 17, 2026

## Collaboration

phenaproxima identified the use case and implemented the feature in a single day, including extracting the shared content loading logic into a reusable component and updating the existing site export functionality to use it.

---

*This summary is AI-generated and may contain errors. Check the [original issue on Drupal.org](https://www.drupal.org/node/3574009) for the full picture. For more digests, see [Drupal Digests](https://github.com/dbuytaert/drupal-digests/).*
