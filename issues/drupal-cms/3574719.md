# #3574719: Content export should ignore Search API tasks and redirects

- **Project:** Drupal CMS
- **Type:** Normal bug report
- **Status:** Fixed
- **Diff:** [8f177df](https://git.drupalcode.org/project/drupal_cms/-/commit/8f177df51fd586d158debd917fd79b88eb9f25b1) 路 +44/-14 路 2 files
- **Discussion:** [#3574719](https://www.drupal.org/node/3574719) 路 1 contributor 路 7 comments

## Summary

Drupal CMS now correctly excludes certain entity types when exporting site content. Previously, the content export system would attempt to export redirects and Search API task entities, which are internal or site-specific data that should not be included in content exports. This fix ensures that only appropriate content is exported, preventing issues when importing content into other sites.

## Impact

No upgrade or configuration changes required.

## Technical details

The `ContentLoader` class in the `drupal_cms_helper` module is responsible for yielding content entities during a site export. Previously, it only filtered out internal entities (like content moderation states) and path aliases. It did not account for certain contrib entity types that should not be exported.

The fix introduces a static `$reject` property containing an explicit list of entity type IDs to exclude from exports. This list currently includes `path_alias` (moved from inline logic), `redirect` (from the Redirect module), and `search_api_task` (an internal Search API entity type used for indexing coordination).

The `getIterator()` method now checks both the `isInternal()` flag and the reject list using `in_array($id, self::$reject, TRUE)` before processing each entity type. The class declaration changed from `final readonly class` to `final class` to accommodate the static property, while the constructor parameter retained its `readonly` modifier.

## Timeline

- Opened: February 20, 2026
- Committed: February 20, 2026

## Collaboration

phenaproxima identified and fixed this issue after pameeela discovered it while working on Haven. The fix was committed quickly on the same day it was reported.

---

*This summary is AI-generated and may contain errors. Check the [original issue on Drupal.org](https://www.drupal.org/node/3574719) for the full picture. For more digests, see [Drupal Digests](https://github.com/dbuytaert/drupal-digests/).*
