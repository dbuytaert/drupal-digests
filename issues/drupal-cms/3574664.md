# #3574664: The `site:export` command should be able to export on top of another recipe

- **Project:** Drupal CMS
- **Type:** Normal feature request
- **Status:** Fixed
- **Diff:** [4c57de3](https://git.drupalcode.org/project/drupal_cms/-/commit/4c57de393c8eb0db9a16ed46263c402979cdf5d9) · +120/-14 prod · +134/-10 test · 10 files
- **Discussion:** [#3574664](https://www.drupal.org/node/3574664) · 1 contributor · 9 comments

## Summary

Drupal CMS now makes it easier to create and publish custom site templates. When exporting your site as a recipe, you can copy scaffolding from a base template that includes important files like CI configuration, license, and README. The export command also fixes common problems that appeared when building site templates, such as issues with front page paths using internal IDs instead of aliases and menu links not properly tracking their parent relationships.

## Impact

No upgrade or configuration changes required.

## Technical details

The `drush site:export` command now accepts a `--base` option that mirrors a base recipe directory into the destination before exporting. This uses Symfony Filesystem to copy files while excluding the `content` directory and VCS files.

Three bug fixes were added to improve the reliability of site exports. First, `GenericConfigurationListener` now converts the front page path in `system.site` config from a system path like `/node/6` to its alias using `AliasManagerInterface`. This works around [#1503146](https://www.drupal.org/node/1503146) until it's released in core. The class gained a `$convertFrontPagePathToAlias` property that `SiteExporter` sets to TRUE.

Second, `DefaultContentSubscriber` now ensures menu link content entities depend on their parent menu links during export. When `PreExportEvent` is fired for a `MenuLinkContentInterface`, the subscriber extracts the parent UUID from the plugin ID and loads the parent entity via `EntityRepositoryInterface`, then adds it as a dependency. This shims around [#3562072](https://www.drupal.org/node/3562072).

Third, the command now checks if the destination directory exists and returns a failure status if it does, preventing accidental overwrites.

Test coverage was expanded with `testExportSiteWithBase()` to verify the base recipe copying behavior, and `testExportSite()` was enhanced to validate the front page alias conversion and menu link dependency fixes.

## Timeline

- Opened: February 19, 2026
- Committed: February 19, 2026

## Collaboration

phenaproxima created this issue, implemented the feature, and merged it into both 2.x and 2.0.x branches the same day it was opened. The work responds directly to feedback from Andy at Dripyard about bugs affecting site template creators.

---

*This summary is AI-generated and may contain errors. Check the [original issue on Drupal.org](https://www.drupal.org/node/3574664) for the full picture. For more digests, see [Drupal Digests](https://github.com/dbuytaert/drupal-digests/).*
