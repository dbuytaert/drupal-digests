# #3569232: Create a Rerank API Explorer for Rerank Op

- **Project:** Drupal AI
- **Type:** Normal feature request
- **Version:** 2.0.x-dev
- **Status:** Fixed
- **Diff:** [1063c6b](https://git.drupalcode.org/project/ai/-/commit/1063c6b58e7eca35a45c4655e295f0682eb6e3d7) 路 +570/-0 路 2 files
- **Discussion:** [#3569232](https://www.drupal.org/node/3569232) 路 4 contributors 路 15 comments

## Summary

The AI module now includes a Rerank Explorer, a testing interface that lets site builders experiment with AI reranking operations. Reranking sorts a list of documents by relevance to a search query. The explorer provides a form where users can enter a query, paste in multiple documents, and see which documents the AI considers most relevant. It displays results with relevance scores, original positions, and working code examples to help developers integrate reranking into their own modules. This makes it easier to test and understand how different AI providers rank content.

## Impact

No upgrade or configuration changes required.

## Technical details

The `ai_api_explorer` submodule adds a new plugin `RerankGenerator` that creates a specialized interface for testing the rerank operation type. The plugin extends `AiApiExplorerPluginBase` and is only active when at least one provider supports the rerank operation.

The `buildForm()` method creates a form with three main inputs: a query text field, a textarea for documents (one per line), and a top_n number field to limit results. It uses `AiProviderFormHelper::generateAiProvidersForm()` to add provider and model selection fields, then adds a submit button with AJAX callbacks.

The `getResponse()` method handles form submission. It splits the documents textarea by newlines, creates a `ReRankInput` object with the query, documents array, and top_n parameter, then calls the provider's `rerank()` method. The response is normalized via `getNormalized()` and formatted as HTML showing each document's relevance score, original index, and text. The method handles both array and object response formats from different providers by checking for `relevance_score` or `score` fields and `document.text` or `text` properties.

The `normalizeCodeExample()` method generates PHP code snippets showing developers how to call the rerank operation programmatically. Error handling catches `TypeError` for configuration issues and generic exceptions for API failures, displaying user-friendly messages in the response area.

## Timeline

- Opened: January 23, 2026
- Committed: February 10, 2026 (17 days later)

## Collaboration

This feature was primarily AI-generated code with human review, as noted in the issue summary. The contributor nikro self-assigned and provided detailed testing steps including specific provider configuration and external API requirements. Abhisekmazumdar provided code review and testing with screenshots demonstrating the working interface. Marcus_johansson made commits to the fork. The issue demonstrates effective use of AI tooling for scaffolding interfaces while maintaining human oversight for integration and testing.

---

*This summary is AI-generated and may contain errors. Check the [original issue on Drupal.org](https://www.drupal.org/node/3569232) for the full picture. For more digests, see [Drupal Digests](https://github.com/dbuytaert/drupal-digests/).*
