# #3566576: Add Field Widget Actions (FWA) support for Chart field using the chart_config_default widget

- **Project:** Drupal AI
- **Type:** Normal feature request
- **Version:** 1.3.x-dev
- **Status:** Fixed
- **Diff:** [7bb7827](https://git.drupalcode.org/project/ai/-/commit/7bb7827487e6deae44cbf71eeee1402071505120) 路 +1015/-41 路 22 files
- **Discussion:** [#3566576](https://www.drupal.org/node/3566576) 路 6 contributors 路 25 comments

## Summary

Site builders can now add a "Generate Chart" button to Chart fields when editing content. This button uses AI to analyze text content like a node body and automatically generate chart data structures. The feature supports the Charts module's chart configuration field type and widget, allowing AI to extract structured data from text and populate chart tables with minimal manual configuration. The system automatically detects CSV delimiters and includes comprehensive setup documentation.

## Impact

No upgrade or configuration changes required.

## Technical details

This change adds a new Field Widget Action plugin `Chart` in `modules/ai_automators/src/Plugin/FieldWidgetAction/Chart.php` that integrates with the `chart_config_default` widget and `chart_config` field type provided by the Charts module. The plugin extends `AutomatorBaseAction` and targets the `config` property of chart field items.

The `Chart` plugin implements `aiAutomatorsAjax()` to handle AJAX requests and `saveFormValues()` to populate the chart data table structure. The `populateTableValues()` helper method handles the complex nested structure of the chart widget's `data_collector_table`, dynamically creating form elements for columns and rows while preserving existing templates for textfield elements.

The underlying `Chart` automator base class in `modules/ai_automators/src/PluginBaseClasses/Chart.php` was improved to use `str_getcsv()` instead of simple `explode()` for parsing CSV data, properly handling quoted values and supporting both semicolon and comma delimiters. The prompt instructions were clarified to request semicolon delimiters and proper quoting of text values.

Extensive documentation was added in `docs/modules/ai_automators/examples/chart-field.md` with a complete four-step setup guide covering field creation, automator configuration, Field Widget Action attachment, and usage. The documentation explains how the `{{ context }}` token pulls data from the base field and how the CSV parser structures chart data. The example documentation was also linked from the main AI Automators index and the `llm_chart_from_text.md` automator type documentation.

## Timeline

- Opened: January 9, 2026
- First commit: February 11, 2026 (1 month later)
- Last commit: February 16, 2026 (5 days later)

## Collaboration

abhisekmazumdar drove this feature from testing through documentation, identifying behavior issues with immediate form population and working with chatGPT to explore solutions. They also caught and fixed a typo in the prompt ("paranthesis" to "parentheses", "withe" to "with") that had existed in the codebase. shalini_jha verified the testing observations independently, confirming the save-before-display behavior. anjaliprasannan helped clarify cross-issue dependencies around module dependencies. a.dmitriiev requested and guided the documentation effort, recognizing that setting up automators is a difficult task for users and pushing for comprehensive setup guides alongside the code.

---

*This summary is AI-generated and may contain errors. Check the [original issue on Drupal.org](https://www.drupal.org/node/3566576) for the full picture. For more digests, see [Drupal Digests](https://github.com/dbuytaert/drupal-digests/).*
