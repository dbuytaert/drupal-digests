# #3561199: Change "AI Logs" view to sort by ID, not created timestamp

- **Project:** Drupal AI
- **Type:** Normal task
- **Version:** 1.2.x-dev
- **Status:** Fixed
- **Diff:** [98e5da9](https://git.drupalcode.org/project/ai/-/commit/98e5da9199b5a477a8057ba555fdaed4e79117af) 路 +38/-6 路 2 files
- **Discussion:** [#3561199](https://www.drupal.org/node/3561199) 路 7 contributors 路 17 comments

## Summary

The AI Logs view was sorting log entries by their creation timestamp, which caused problems when multiple log entries were created at the same moment. When an AI agent request generates several related log entries instantly, they all get the same timestamp. This made the log display order unpredictable and difficult to follow. The view now sorts by the unique log ID instead, ensuring entries always appear in the order they were actually created, with the newest on top.

## Impact

No upgrade or configuration changes required.

## Technical details

The `ai_logs` view configuration was using the `created` timestamp field as the default sort criterion. When AI agent requests generate multiple related log entries in quick succession, they often share identical timestamps, making the sort order non-deterministic. The view would not consistently show the newest entries at the top.

The change updates the view configuration in `views.view.ai_logs.yml` to sort by the `id` field instead of `created`, both set to descending order. The `id` field is a unique, auto-incrementing identifier that guarantees consistent chronological ordering.

An update function `ai_logging_update_10306()` was added to migrate existing installations. It programmatically updates the view configuration by removing the `created` sort criterion and replacing it with an `id` sort using the standard plugin. The update checks if the view exists and if the `created` sort is present before making changes.

## Timeline

- Opened: December 3, 2025
- Committed: February 9, 2026 (2 months later)

## Collaboration

ultimike identified the problem when working with agent requests that generated multiple simultaneous log entries. fago added the critical update hook that was missing from the initial patch, ensuring existing sites would automatically receive the configuration change. abhisekmazumdar managed merge request cleanup by hiding the older MR after the update hook was added to a newer one. Petar_basic and thamas both tested the change, with Petar_basic confirming the specific problem scenario with assistants and verifying the update hook ran successfully.

---

*This summary is AI-generated and may contain errors. Check the [original issue on Drupal.org](https://www.drupal.org/node/3561199) for the full picture. For more digests, see [Drupal Digests](https://github.com/dbuytaert/drupal-digests/).*
