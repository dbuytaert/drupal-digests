# #3570252: Cannot select all models for "Chat with Complex JSON"

- **Project:** Drupal AI
- **Type:** Major bug report
- **Version:** 1.2.0
- **Status:** Fixed
- **Discussion:** [#3570252](https://www.drupal.org/node/3570252) · 5 contributors · 12 comments

## Summary

Site administrators can now select GPT-5 models when configuring "Chat with Complex JSON" in the AI module's default settings. Previously, only older GPT-3 and GPT-4 models appeared in the dropdown for structured JSON output, even though GPT-5 models support this feature. The limitation was caused by filtering logic that excluded newer model naming patterns.

## Impact

No upgrade or configuration changes required.

## Technical details

The AI Provider OpenAI module filters available models for the "Chat with Complex JSON" operation type based on model name patterns. This filtering ensures only models that support structured JSON output appear in the configuration form at `/admin/config/ai/settings`.

The original filtering logic did not include GPT-5 model name patterns, so these newer models were excluded from the dropdown even though OpenAI documents them as supporting structured output. The fix adds GPT-5 patterns to the allowlist so administrators can select models like `gpt-5.1` and `gpt-5.2` for JSON-structured responses.

OpenAI's documentation confirms that GPT-5.1 and GPT-5.2 models support structured output functionality, making them suitable for chat operations that require complex JSON responses. This change aligns the module's model filtering with OpenAI's current model capabilities.

## Timeline

- Opened: January 29, 2026

## Collaboration

Akhil babu identified the model name filtering issue and proposed the solution. Marcus_johansson confirmed that GPT-5 models support structured output by referencing OpenAI's documentation and connected this work to related improvements in [#3572299](https://www.drupal.org/project/ai_provider_openai/issues/3572299). Breidert raised important questions about validation and testing to ensure the fix worked correctly.

---

*This summary is AI-generated and may contain errors. Check the [original issue on Drupal.org](https://www.drupal.org/node/3570252) for the full picture. For more digests, see [Drupal Digests](https://github.com/dbuytaert/drupal-digests/).*
