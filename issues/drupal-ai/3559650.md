# #3559650: Allow custom messaging in AI Chatbot instead of "..."

- **Project:** Drupal AI
- **Type:** Normal feature request
- **Version:** 1.3.x-dev
- **Status:** Fixed
- **Diff:** [31faf5c](https://git.drupalcode.org/project/ai/-/commit/31faf5cb2b0a4004181dad790ac68cd9bc3031d7) 路 +62/-4 路 8 files
- **Discussion:** [#3559650](https://www.drupal.org/node/3559650) 路 7 contributors 路 31 comments

## Summary

The AI Chatbot block now lets site administrators customize the message shown while the AI is thinking. Instead of only showing an animated "..." ellipsis, you can configure a custom message like "Give me a moment to find the best answer..." to provide clearer feedback to visitors. This makes the chatbot feel more responsive and professional, especially when responses take a few seconds to generate. The custom message appears in the block configuration under Message Settings and only displays when Verbose Mode is turned off.

## Impact

No upgrade or configuration changes required.

## Technical details

The `DeepChatFormBlock` block plugin now includes a `loading_message` configuration field that allows administrators to specify custom text displayed while the AI generates a response. The new field appears in the block's Message Settings form group and is disabled when Verbose Mode is enabled.

The implementation adds the `loading_message` configuration to three places: the plugin's default configuration array, the configuration schema in `block.settings.ai_deepchat_block.schema.yml`, and the form definition in `blockForm()`. The value is saved in `blockSubmit()` and passed to the frontend via `drupalSettings.ai_deepchat.loading_message`.

On the JavaScript side, `deepchat-init.js` checks if Verbose Mode is off and a loading message exists. If both conditions are met, it uses the DeepChat component's `addMessage()` method to inject a temporary message with the class `deep-chat-temporary-message` before the actual AI response arrives.

The toolbar style sheet (`toolbar.yml`) was updated to apply the loading avatar animation to both the existing `.loading-wrapper` and the new `.deep-chat-temporary-message` containers. CSS adjustments ensure consistent padding and alignment for the avatar and message text. If the loading message field is left empty, the chatbot falls back to the original animated ellipsis behavior.

## Timeline

- Opened: November 24, 2025
- Committed: February 9, 2026 (2 months later)

## Collaboration

This feature emerged from a UX request by ronraney and was implemented by bbruno. Ahmad khader provided thorough testing across multiple chatbot configurations and placement options, catching a missing schema definition and confirming the feature worked correctly with Verbose Mode toggling. Petar_basic assisted with rebasing when patch application issues arose. The review process highlighted the value of testing UI features with different admin themes and configuration combinations to catch edge cases early.

---

*This summary is AI-generated and may contain errors. Check the [original issue on Drupal.org](https://www.drupal.org/node/3559650) for the full picture. For more digests, see [Drupal Digests](https://github.com/dbuytaert/drupal-digests/).*
